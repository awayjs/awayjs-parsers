require=function e(t,a,r){function s(n,o){if(!a[n]){if(!t[n]){var h=typeof require=="function"&&require;if(!o&&h)return h(n,!0);if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[n]={exports:{}};t[n][0].call(d.exports,function(e){var a=t[n][1][e];return s(a?a:e)},d,d.exports,e,t,a,r)}return a[n].exports}var i=typeof require=="function"&&require;for(var n=0;n<r.length;n++)s(r[n]);return s}({"awayjs-parsers/lib/AWDParser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/data/BlendMode");var i=e("awayjs-core/lib/data/Geometry");var n=e("awayjs-core/lib/data/CurveSubGeometry");var o=e("awayjs-core/lib/data/TriangleSubGeometry");var h=e("awayjs-core/lib/geom/ColorTransform");var l=e("awayjs-core/lib/geom/Matrix3D");var d=e("awayjs-core/lib/geom/Vector3D");var c=e("awayjs-core/lib/net/URLLoaderDataFormat");var p=e("awayjs-core/lib/net/URLRequest");var u=e("awayjs-core/lib/parsers/ParserBase");var _=e("awayjs-core/lib/parsers/ParserUtils");var y=e("awayjs-core/lib/projections/PerspectiveProjection");var f=e("awayjs-core/lib/projections/OrthographicProjection");var m=e("awayjs-core/lib/projections/OrthographicOffCenterProjection");var b=e("awayjs-core/lib/textures/BitmapCubeTexture");var v=e("awayjs-core/lib/textures/ImageCubeTexture");var g=e("awayjs-core/lib/textures/ImageTexture");var w=e("awayjs-core/lib/textures/TextureBase");var k=e("awayjs-core/lib/utils/ByteArray");var B=e("awayjs-display/lib/animators/nodes/AnimationNodeBase");var M=e("awayjs-display/lib/containers/DisplayObjectContainer");var N=e("awayjs-display/lib/base/LightBase");var D=e("awayjs-display/lib/entities/DirectionalLight");var T=e("awayjs-display/lib/entities/PointLight");var x=e("awayjs-display/lib/entities/Camera");var A=e("awayjs-display/lib/entities/Mesh");var S=e("awayjs-display/lib/entities/TextField");var I=e("awayjs-display/lib/entities/Billboard");var j=e("awayjs-display/lib/entities/Skybox");var P=e("awayjs-display/lib/managers/DefaultMaterialManager");var U=e("awayjs-display/lib/materials/MaterialBase");var E=e("awayjs-display/lib/materials/lightpickers/LightPickerBase");var C=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var F=e("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper");var O=e("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var L=e("awayjs-display/lib/prefabs/PrefabBase");var R=e("awayjs-display/lib/prefabs/PrimitiveCapsulePrefab");var G=e("awayjs-display/lib/prefabs/PrimitiveConePrefab");var V=e("awayjs-display/lib/prefabs/PrimitiveCubePrefab");var z=e("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");var K=e("awayjs-display/lib/prefabs/PrimitivePlanePrefab");var W=e("awayjs-display/lib/prefabs/PrimitiveSpherePrefab");var H=e("awayjs-display/lib/prefabs/PrimitiveTorusPrefab");var J=e("awayjs-renderergl/lib/animators/AnimationSetBase");var Q=e("awayjs-renderergl/lib/animators/VertexAnimationSet");var X=e("awayjs-renderergl/lib/animators/VertexAnimator");var q=e("awayjs-renderergl/lib/animators/SkeletonAnimationSet");var Y=e("awayjs-renderergl/lib/animators/SkeletonAnimator");var Z=e("awayjs-renderergl/lib/animators/data/JointPose");var $=e("awayjs-renderergl/lib/animators/data/Skeleton");var ee=e("awayjs-renderergl/lib/animators/data/SkeletonPose");var te=e("awayjs-renderergl/lib/animators/data/SkeletonJoint");var ae=e("awayjs-renderergl/lib/animators/nodes/SkeletonClipNode");var re=e("awayjs-renderergl/lib/animators/nodes/VertexClipNode");var se=e("awayjs-methodmaterials/lib/MethodMaterialMode");var ie=e("awayjs-methodmaterials/lib/MethodMaterial");var ne=e("awayjs-methodmaterials/lib/methods/AmbientEnvMapMethod");var oe=e("awayjs-methodmaterials/lib/methods/DiffuseDepthMethod");var he=e("awayjs-methodmaterials/lib/methods/DiffuseCelMethod");var le=e("awayjs-methodmaterials/lib/methods/DiffuseGradientMethod");var de=e("awayjs-methodmaterials/lib/methods/DiffuseLightMapMethod");var ce=e("awayjs-methodmaterials/lib/methods/DiffuseWrapMethod");var pe=e("awayjs-methodmaterials/lib/methods/EffectAlphaMaskMethod");var ue=e("awayjs-methodmaterials/lib/methods/EffectColorMatrixMethod");var _e=e("awayjs-methodmaterials/lib/methods/EffectColorTransformMethod");var ye=e("awayjs-methodmaterials/lib/methods/EffectEnvMapMethod");var fe=e("awayjs-methodmaterials/lib/methods/EffectFogMethod");var me=e("awayjs-methodmaterials/lib/methods/EffectFresnelEnvMapMethod");var be=e("awayjs-methodmaterials/lib/methods/EffectLightMapMethod");var ve=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var ge=e("awayjs-methodmaterials/lib/methods/EffectRimLightMethod");var we=e("awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod");var ke=e("awayjs-methodmaterials/lib/methods/ShadowDitheredMethod");var Be=e("awayjs-methodmaterials/lib/methods/ShadowFilteredMethod");var Me=e("awayjs-methodmaterials/lib/methods/ShadowMapMethodBase");var Ne=e("awayjs-methodmaterials/lib/methods/SpecularFresnelMethod");var De=e("awayjs-methodmaterials/lib/methods/ShadowHardMethod");var Te=e("awayjs-methodmaterials/lib/methods/SpecularAnisotropicMethod");var xe=e("awayjs-methodmaterials/lib/methods/SpecularCelMethod");var Ae=e("awayjs-methodmaterials/lib/methods/SpecularPhongMethod");var Se=e("awayjs-methodmaterials/lib/methods/ShadowNearMethod");var Ie=e("awayjs-methodmaterials/lib/methods/ShadowSoftMethod");var je=e("awayjs-display/lib/materials/CurveMaterial");var Pe=e("awayjs-display/lib/materials/BasicMaterial");var Ue=e("awayjs-player/lib/factories/AS2SceneGraphFactory");var Ee=e("awayjs-player/lib/timeline/TimelineKeyFrame");var Ce=e("awayjs-player/lib/timeline/commands/AddChildAtDepthCommand");var Fe=e("awayjs-player/lib/timeline/commands/ApplyAS2DepthsCommand");var Oe=e("awayjs-player/lib/timeline/commands/ExecuteScriptCommand");var Le=e("awayjs-player/lib/timeline/commands/RemoveChildrenAtDepthCommand");var Re=e("awayjs-player/lib/timeline/commands/SetInstanceNameCommand");var Ge=e("awayjs-player/lib/timeline/commands/UpdatePropertyCommand");var Ve=e("awayjs-player/lib/timeline/commands/SetMaskCommand");var ze=e("awayjs-display/lib/text/Font");var Ke=e("awayjs-display/lib/text/TextFormat");var We=function(e){r(t,e);function t(){e.call(this,c.ARRAY_BUFFER);this._debug=false;this._startedParsing=false;this._texture_users={};this._parsed_header=false;this._blocks=new Array;this._blocks[0]=new He;this._blocks[0].data=null;this.blendModeDic=new Array;this.blendModeDic.push(s.NORMAL);this.blendModeDic.push(s.ADD);this.blendModeDic.push(s.ALPHA);this.blendModeDic.push(s.DARKEN);this.blendModeDic.push(s.DIFFERENCE);this.blendModeDic.push(s.ERASE);this.blendModeDic.push(s.HARDLIGHT);this.blendModeDic.push(s.INVERT);this.blendModeDic.push(s.LAYER);this.blendModeDic.push(s.LIGHTEN);this.blendModeDic.push(s.MULTIPLY);this.blendModeDic.push(s.NORMAL);this.blendModeDic.push(s.OVERLAY);this.blendModeDic.push(s.SCREEN);this.blendModeDic.push(s.SHADER);this.blendModeDic.push(s.OVERLAY);this._depthSizeDic=new Array;this._depthSizeDic.push(256);this._depthSizeDic.push(512);this._depthSizeDic.push(2048);this._depthSizeDic.push(1024);this._version=Array()}t.supportsType=function(e){e=e.toLowerCase();return e=="awd"};t.supportsData=function(e){return _.toString(e,3)=="AWD"};t.prototype._iResolveDependency=function(e){if(e.assets.length==1){var t=e.id.split("#");var a=t[0];var r;var s;var i;if(t.length==1){r=e.assets[0];if(r){var n;var o;i=this._blocks[e.id];i.data=r;r.resetAssetPath(i.name,null,true);i.name=r.name;this._pFinalizeAsset(r);if(this._debug){console.log("Successfully loaded Bitmap for texture");console.log("Parsed texture: Name = "+i.name)}}}if(t.length>1){s=e.assets[0];var h=s;this._cubeTextures[t[1]]=h.htmlImageElement;this._texture_users[a].push(1);if(this._debug){console.log("Successfully loaded Bitmap "+this._texture_users[a].length+" / 6 for Cubetexture")}if(this._texture_users[a].length==this._cubeTextures.length){var l=this._cubeTextures[0];var d=this._cubeTextures[1];var c=this._cubeTextures[2];var p=this._cubeTextures[3];var u=this._cubeTextures[4];var _=this._cubeTextures[5];r=new v(l,d,c,p,u,_);i=this._blocks[a];i.data=r;r.resetAssetPath(i.name,null,true);i.name=r.name;this._pFinalizeAsset(r);if(this._debug){console.log("Parsed CubeTexture: Name = "+i.name)}}}}};t.prototype._iResolveDependencyFailure=function(e){};t.prototype._iResolveDependencyName=function(e,t){var a=t.name;if(t){var r=this._blocks[parseInt(e.id)];t.resetAssetPath(r.name,null,true)}var s=t.name;t.name=a;return s};t.prototype._pProceedParsing=function(){if(!this._startedParsing){this._byteData=this._pGetByteData();this._startedParsing=true}if(!this._parsed_header){this.parseHeader();switch(this._compression){case t.DEFLATE:case t.LZMA:this._pDieWithError("Compressed AWD formats not yet supported");break;case t.UNCOMPRESSED:this._body=this._byteData;break}this._parsed_header=true}if(this._body){while(this._body.getBytesAvailable()>0&&!this.parsingPaused){this.parseNextBlock()}if(this._body.getBytesAvailable()==0){this.dispose();return u.PARSING_DONE}else{return u.MORE_TO_PARSE}}else{switch(this._compression){case t.DEFLATE:case t.LZMA:if(this._debug){console.log("(!) AWDParser Error: Compressed AWD formats not yet supported (!)")}break}return u.PARSING_DONE}};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new M};t.prototype.dispose=function(){for(var e in this._blocks){var t=this._blocks[e];t.dispose()}};t.prototype.parseNextBlock=function(){var e;var a;var r=false;var s;var i;var n;var o;this._cur_block_id=this._body.readUnsignedInt();s=this._body.readUnsignedByte();i=this._body.readUnsignedByte();n=this._body.readUnsignedByte();o=this._body.readUnsignedInt();var h=Qe.test(n,Qe.FLAG4);var l=Qe.test(n,Qe.FLAG5);if(this._accuracyOnBlocks){this._accuracyMatrix=Qe.test(n,Qe.FLAG1);this._accuracyGeo=Qe.test(n,Qe.FLAG2);this._accuracyProps=Qe.test(n,Qe.FLAG3);this._geoNrType=t.FLOAT32;if(this._accuracyGeo){this._geoNrType=t.FLOAT64}this._matrixNrType=t.FLOAT32;if(this._accuracyMatrix){this._matrixNrType=t.FLOAT64}this._propsNrType=t.FLOAT32;if(this._accuracyProps){this._propsNrType=t.FLOAT64}}var d=this._body.position+o;if(o>this._body.getBytesAvailable()){this._pDieWithError("AWD2 block length is bigger than the bytes that are available!");this._body.position+=this._body.getBytesAvailable();return}this._newBlockBytes=new k;this._body.readBytes(this._newBlockBytes,0,o);if(h){this._pDieWithError("Compressed AWD formats not yet supported")}this._newBlockBytes.position=0;e=new He;e.len=this._newBlockBytes.position+o;e.id=this._cur_block_id;var c=this._newBlockBytes.position+o;if(h){this._pDieWithError("Compressed AWD formats not yet supported")}if(this._debug){console.log("AWDBlock:  ID = "+this._cur_block_id+" | TypeID = "+i+" | Compression = "+h+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps)}this._blocks[this._cur_block_id]=e;if(this._version[0]==3&&this._version[1]==0){var p=new Ue;switch(i){case 24:this.parseMeshLibraryBlock(this._cur_block_id);r=true;break;case 25:this.parseBillBoardLibraryBlock(this._cur_block_id);r=true;break;case 44:this.parseAudioBlock(this._cur_block_id,p);r=true;break;case 133:this.parseTimeLine(this._cur_block_id,p);r=true;break;case 134:this.paresTextField(this._cur_block_id,p);r=true;break;case 135:this.parseTesselatedFont(this._cur_block_id);r=true;break;case 136:this.parseTextFormat(this._cur_block_id);r=true;break}}if(this._version[0]>2||this._version[0]>=2&&this._version[1]>=1){switch(i){case 11:this.parsePrimitves(this._cur_block_id);r=true;break;case 31:this.parseSkyboxInstance(this._cur_block_id);r=true;break;case 41:this.parseLight(this._cur_block_id);r=true;break;case 42:this.parseCamera(this._cur_block_id);r=true;break;case 51:this.parseLightPicker(this._cur_block_id);r=true;break;case 81:this.parseMaterial_v1(this._cur_block_id);r=true;break;case 83:this.parseCubeTexture(this._cur_block_id);r=true;break;case 91:this.parseSharedMethodBlock(this._cur_block_id);r=true;break;case 92:this.parseShadowMethodBlock(this._cur_block_id);r=true;break;case 111:this.parseMeshPoseAnimation(this._cur_block_id,true);r=true;break;case 112:this.parseMeshPoseAnimation(this._cur_block_id);r=true;break;case 113:this.parseVertexAnimationSet(this._cur_block_id);r=true;break;case 122:this.parseAnimatorSet(this._cur_block_id);r=true;break;case 253:this.parseCommand(this._cur_block_id);r=true;break}}if(r==false){switch(i){case 1:this.parseTriangleGeometrieBlock(this._cur_block_id);break;case 22:this.parseContainer(this._cur_block_id);break;case 23:this.parseMeshInstance(this._cur_block_id);break;case 81:this.parseMaterial(this._cur_block_id);break;case 82:this.parseTexture(this._cur_block_id);break;case 101:this.parseSkeleton(this._cur_block_id);break;case 102:this.parseSkeletonPose(this._cur_block_id);break;case 103:this.parseSkeletonAnimation(this._cur_block_id);break;case 121:case 254:this.parseNameSpace(this._cur_block_id);break;case 255:this.parseMetaData(this._cur_block_id);break;default:if(this._debug){console.log("AWDBlock:   Unknown BlockType  (BlockID = "+this._cur_block_id+") - Skip "+o+" bytes")}this._newBlockBytes.position+=o;break}}var u=0;if(this._newBlockBytes.position==c){if(this._debug){if(e.errorMessages){while(u<e.errorMessages.length){console.log("        (!) Error: "+e.errorMessages[u]+" (!)");u++}}}if(this._debug){console.log("\n")}}else{if(this._debug){console.log("  (!)(!)(!) Error while reading AWDBlock ID "+this._cur_block_id+" = skip to next block");if(e.errorMessages){while(u<e.errorMessages.length){console.log("        (!) Error: "+e.errorMessages[u]+" (!)");u++}}}}this._body.position=d;this._newBlockBytes=null};t.prototype.parseTesselatedFont=function(e){var t=this.parseVarStr();this._blocks[e].name=t;var a=this._newBlockBytes.readUnsignedInt();var r=new ze;for(var s=0;s<a;++s){var i=this.parseVarStr();var o=r.get_font_table(i);o.set_font_em_size(this._newBlockBytes.readUnsignedInt());var h=this._newBlockBytes.readUnsignedInt();for(var s=0;s<h;++s){var l=this._newBlockBytes.readUnsignedInt();var d=this._newBlockBytes.readUnsignedInt();var c=this._newBlockBytes.position+d;while(this._newBlockBytes.position<c){var p=0;var u,_,y,f;_=this._newBlockBytes.readUnsignedByte();u=this._newBlockBytes.readUnsignedByte();y=this._newBlockBytes.readUnsignedInt();f=this._newBlockBytes.position+y;if(_==2){var m=new Array;while(this._newBlockBytes.position<f){m[p++]=this._newBlockBytes.readUnsignedShort()}}else if(_==10){var b=0;var v=0;var g=0;var w=new Array;var k=new Array;var B=new Array;while(this._newBlockBytes.position<f){w[b++]=this.readNumber(this._accuracyGeo);w[b++]=this.readNumber(this._accuracyGeo);w[b++]=this.readNumber(this._accuracyGeo);k[v++]=this.readNumber(this._accuracyGeo);k[v++]=this.readNumber(this._accuracyGeo);B[g++]=this.readNumber(this._accuracyGeo);B[g++]=this.readNumber(this._accuracyGeo)}}else{this._newBlockBytes.position=f}}var M=new n(true);M.updateIndices(m);M.updatePositions(w);M.updateCurves(k);M.updateUVs(B);o.set_subgeo_for_char(l.toString(),M)}}this.parseProperties(null);this.parseUserAttributes();this._pFinalizeAsset(r,t);this._blocks[e].data=r;if(this._debug){console.log("Parsed a font: Name = '"+t)}};t.prototype.parseTextFormat=function(e){var a=this.parseVarStr();this._blocks[e].name=a;var r=this._newBlockBytes.readUnsignedInt();var s=this.parseVarStr();var i=this.getAssetByID(r,[ze.assetType]);var n;if(i[0]){n=i[1]}else{this._blocks[e].addError("Could not find a Font for this TextFormat. A empty Font is created!");n=new ze}var o=new Ke;o.font_name=n.name;var h=n.get_font_table(s);if(h!=null){o.font_style=s;o.font_table=h}var l=this._newBlockBytes.readUnsignedInt();var d;var c=this.getAssetByID(l,[U.assetType]);if(c[0]){d=c[1]}else{this._blocks[e].addError("Could not find a Material for this TextFormat. Default Material will be used!");d=new Pe}d.bothSides=true;var p=this._newBlockBytes.readUnsignedByte();var u=[];for(var _=0;_<p;_++){var y=this._newBlockBytes.readFloat();u.push(y)}o.uv_values=u;var f=this.parseProperties({1:t.UINT16,2:t.UINT16,3:t.UINT8,4:t.UINT8,5:t.UINT8});o.size=f.get(1,12);o.letterSpacing=f.get(2,0);o.kerning=f.get(4,true);o.material=d;this.parseUserAttributes();this._pFinalizeAsset(o,a);this._blocks[e].data=o;if(this._debug){console.log("Parsed a TextFormat: Name = '"+a+" font: "+n.name)}};t.prototype.paresTextField=function(e,t){var a=this.parseVarStr();this._blocks[e].name=a;var r=t.createTextField();r.width=this._newBlockBytes.readFloat();r.height=this._newBlockBytes.readFloat();var s=this._newBlockBytes.readUnsignedInt();var i="";var n;for(var o=0;o<s;o++){var h=this._newBlockBytes.readUnsignedInt();for(var l=0;l<h;l++){var d=this._newBlockBytes.readUnsignedInt();var c=this.getAssetByID(d,[Ke.assetType]);if(c[0]){n=c[1]}else{this._blocks[e].addError("Could not find a Material for this Billboard. A empty material is created!");n=new Ke}var p=this._newBlockBytes.readUnsignedInt();if(p>0){var u=this._newBlockBytes.readUTFBytes(p);i+=u}}}r.textFormat=n;r.text=i;this.parseProperties(null);r.extra=this.parseUserAttributes();this._pFinalizeAsset(r,a);this._blocks[e].data=r;if(this._debug){console.log("Parsed a TextField: Name = '"+a+"| text  = "+i)}};t.prototype.parseBillBoardLibraryBlock=function(e){var t=this.parseVarStr();var a=this._newBlockBytes.readUnsignedInt();var r;var s=this.getAssetByID(a,[U.assetType]);if(s[0]){r=s[1]}else{this._blocks[e].addError("Could not find a Material for this Billboard. A empty material is created!");r=new Pe}r.bothSides=true;var i=new I(r);this.parseProperties(null);i.extra=this.parseUserAttributes();this._pFinalizeAsset(i,t);this._blocks[e].data=i;if(this._debug){console.log("Parsed a Library-Billboard: Name = '"+t+"| Material-Name = "+r.name)}};t.prototype.parseMeshLibraryBlock=function(e){var t;var a;var r=this.parseVarStr();var s=this._newBlockBytes.readUnsignedInt();var n;var o=this.getAssetByID(s,[i.assetType]);if(o[0]){n=o[1]}else{this._blocks[e].addError("Could not find a Geometry for this Mesh. A empty Geometry is created!");n=new i}this._blocks[e].geoID=s;var h=new Array;t=this._newBlockBytes.readUnsignedShort();var l=new Array;a=0;var d;while(a<t){var c;c=this._newBlockBytes.readUnsignedInt();d=this.getAssetByID(c,[U.assetType]);if(!d[0]&&c>0){this._blocks[e].addError("Could not find Material Nr "+a+" (ID = "+c+" ) for this Mesh")}var p=d[1];h.push(p);l.push(p.name);a++}var u=new A(n,null);if(h.length>=1&&u.subMeshes.length==1){u.material=h[0]}else if(h.length>1){var _;for(_=0;_<u.subMeshes.length;_++){u.subMeshes[_].material=h[Math.min(h.length-1,_)]}}this.parseProperties(null);u.extra=this.parseUserAttributes();this._pFinalizeAsset(u,r);this._blocks[e].data=u;if(this._debug){console.log("Parsed a Library-Mesh: Name = '"+r+"| Geometry-Name = "+n.name+" | SubMeshes = "+u.subMeshes.length+" | Mat-Names = "+l.toString())}};t.prototype.parseAudioBlock=function(e,t){this._blocks[e].name=this.parseVarStr();var a=this._newBlockBytes.readUnsignedByte();var r;if(a==0){r=this._newBlockBytes.readUnsignedInt();var s;s=this._newBlockBytes.readUTFBytes(r);console.log("Audio url = "+s)}else{r=this._newBlockBytes.readUnsignedInt();var i;i=new k;this._newBlockBytes.readBytes(i,0,r)}this.parseProperties(null);this._blocks[e].extras=this.parseUserAttributes();this._pPauseAndRetrieveDependencies();if(this._debug){var n=["external","embed"];console.log("Start parsing a "+n[a]+" Audio file")}};t.prototype.parseTimeLine=function(e,t){var a;var r;var s;var i=t.createMovieClip();var n=this.parseVarStr();var o=!!this._newBlockBytes.readUnsignedByte();var c=this._newBlockBytes.readUnsignedByte();var p=this._newBlockBytes.readFloat();var u=1e3/p;var _=0;var y=0;var f=this._newBlockBytes.readUnsignedShort();for(a=0;a<f;a++){T=this._newBlockBytes.readUnsignedInt();var m=this._blocks[T].data;if(m!=null){i.registerPotentialChild(m)}else{console.log("ERROR when collecting objects for timeline")}}y+=f;var b=this._newBlockBytes.readUnsignedShort();f+=b;for(a=0;a<b;a++){T=this._newBlockBytes.readUnsignedInt();_=this._newBlockBytes.readUnsignedShort();y+=_;var m=this._blocks[T].data;if(m!=null){for(r=0;r<_;r++){i.registerPotentialChild(m)}}else{for(r=0;r<_;r++){console.log("ERROR when collecting objects for timeline")}}}var v=this._newBlockBytes.readUnsignedShort();for(a=0;a<v;a++){T=this._newBlockBytes.readUnsignedInt();var m=this._blocks[T].data;if(m!=null){console.log("ERROR when collecting objects for timeline")}else{}}var g=this._newBlockBytes.readUnsignedShort();var w;var k;var B;var M;var N;var D;var T;var x;var A;var I;var j;var P;w=0;for(a=0;a<g;a++){I=new Ee;k=this._newBlockBytes.readUnsignedInt()*u;I.setFrameTime(w,k);w+=k;B=this._newBlockBytes.readUnsignedByte();for(r=0;r<B;r++){j=this.parseVarStr()}M=this._newBlockBytes.readUnsignedShort();P=false;for(r=0;r<M;r++){A=this._newBlockBytes.readUnsignedByte();switch(A){case 1:x=this._newBlockBytes.readUnsignedShort();var U=new Array;for(s=0;s<x;s++){D=this._newBlockBytes.readShort();U.push(D)}I.addConstructCommand(new Le(U));break;case 2:case 3:N=this._newBlockBytes.readUnsignedShort();if(A==2){P=true;D=this._newBlockBytes.readShort();var E=i.getPotentialChild(N);if(E!=undefined){I.addConstructCommand(new Ce(N,D));if(E.isAsset(S)){I.addConstructCommand(new Re(N,E.name))}}else{console.log("ERROR: could not find the objectID ",N)}}var C=this._newBlockBytes.readUnsignedShort();if(Qe.test(C,Qe.FLAG1)){var F=new l;if(Qe.test(C,Qe.FLAG2)){}else{F.rawData[0]=this._newBlockBytes.readFloat();F.rawData[1]=this._newBlockBytes.readFloat();F.rawData[4]=this._newBlockBytes.readFloat();F.rawData[5]=this._newBlockBytes.readFloat();F.position=new d(this._newBlockBytes.readFloat(),this._newBlockBytes.readFloat(),0)}I.addConstructCommand(new Ge(N,"_iMatrix3D",F))}if(Qe.test(C,Qe.FLAG3)){var O=new h;if(Qe.test(C,Qe.FLAG4)){}else{O.redMultiplier=this._newBlockBytes.readFloat();O.greenMultiplier=this._newBlockBytes.readFloat();O.blueMultiplier=this._newBlockBytes.readFloat();O.alphaMultiplier=this._newBlockBytes.readFloat();O.redOffset=this._newBlockBytes.readShort();O.greenOffset=this._newBlockBytes.readShort();O.blueOffset=this._newBlockBytes.readShort();O.alphaOffset=this._newBlockBytes.readShort()}}if(Qe.test(C,Qe.FLAG5)){var L=this._newBlockBytes.readUnsignedByte();var R=this.blendModeDic[L]}if(Qe.test(C,Qe.FLAG6)){I.addConstructCommand(new Ge(N,"visible",this._newBlockBytes.readByte()))}if(Qe.test(C,Qe.FLAG7)){var G=this.parseVarStr();if(G.length){I.addConstructCommand(new Re(N,G))}}if(Qe.test(C,Qe.FLAG8)){var V=this._newBlockBytes.readUnsignedShort();var z=new Array;for(var K=0;K<V;K++){z.push(this._newBlockBytes.readShort())}if(z.length>0){if(z.length==1&&z[0]==-1){I.addConstructCommand(new Ge(N,"_iMaskID",N))}else I.addConstructCommand(new Ve(N,z))}}break;case 4:N=this._newBlockBytes.readUnsignedInt();T=this._newBlockBytes.readUnsignedInt();break;default:break}}if(P){I.addConstructCommand(new Fe);P=false}var W=this._newBlockBytes.readUnsignedInt();if(W>0){var H=this._newBlockBytes.readUTFBytes(W);I.addConstructCommand(new Oe(H))}this._newBlockBytes.readUnsignedInt();i.addFrame(I)}this._pFinalizeAsset(i,n);this._blocks[e].data=i;this.parseProperties(null);this.parseUserAttributes();if(this._debug)console.log("Parsed a TIMELINE: Name = "+n+"| isScene = "+o+"| sceneID = "+c+"| numFrames = "+g)};t.prototype.parseTriangleGeometrieBlock=function(e){var t=new i;var a=this.parseVarStr();var r=this._newBlockBytes.readUnsignedShort();var s=this.parseProperties({1:this._geoNrType,2:this._geoNrType});var h=s.get(1,1);var l=s.get(2,1);var d=0;while(d<r){var c=false;var p;var u,_;var y;var f;u=this._newBlockBytes.readUnsignedInt();_=this._newBlockBytes.position+u;var m=this.parseProperties({1:this._geoNrType,2:this._geoNrType});while(this._newBlockBytes.position<_){var b=0;var v,g,w,k;g=this._newBlockBytes.readUnsignedByte();v=this._newBlockBytes.readUnsignedByte();w=this._newBlockBytes.readUnsignedInt();k=this._newBlockBytes.position+w;var B,M,N;if(g==1){var D=new Array;while(this._newBlockBytes.position<k){B=this.readNumber(this._accuracyGeo);M=this.readNumber(this._accuracyGeo);N=this.readNumber(this._accuracyGeo);D[b++]=B;D[b++]=M;D[b++]=N}}else if(g==2){var T=new Array;while(this._newBlockBytes.position<k){T[b++]=this._newBlockBytes.readUnsignedShort()}}else if(g==3){var x=new Array;while(this._newBlockBytes.position<k){x[b++]=this.readNumber(this._accuracyGeo)}}else if(g==4){var A=new Array;while(this._newBlockBytes.position<k){A[b++]=this.readNumber(this._accuracyGeo)}}else if(g==6){y=Array();while(this._newBlockBytes.position<k){y[b++]=this._newBlockBytes.readUnsignedShort()*3}}else if(g==7){f=new Array;while(this._newBlockBytes.position<k){f[b++]=this.readNumber(this._accuracyGeo)}}else if(g==8){this._newBlockBytes.position=k}else if(g==9){this._newBlockBytes.position=k}else if(g==10){c=true;var S=0;var I=0;var j=0;var P=new Array;var U=new Array;var x=new Array;while(this._newBlockBytes.position<k){P[S++]=this.readNumber(this._accuracyGeo);P[S++]=this.readNumber(this._accuracyGeo);P[S++]=this.readNumber(this._accuracyGeo);U[I++]=this.readNumber(this._accuracyGeo);U[I++]=this.readNumber(this._accuracyGeo);x[j++]=this.readNumber(this._accuracyGeo);x[j++]=this.readNumber(this._accuracyGeo)}}else{this._newBlockBytes.position=k}}this.parseUserAttributes();if(c){var E=new n(true);E.updateIndices(T);E.updatePositions(P);E.updateCurves(U);E.updateUVs(x);t.addSubGeometry(E);if(this._debug)console.log("Parsed a CurveSubGeometry")}else{var C=new o(true);if(f)C.jointsPerVertex=f.length/(D.length/3);if(A)C.autoDeriveNormals=false;if(x)C.autoDeriveUVs=false;if(true){C.autoDeriveTangents=true}C.updateIndices(T);C.updatePositions(D);C.updateVertexNormals(A);C.updateUVs(x);C.updateVertexTangents(null);C.updateJointWeights(f);C.updateJointIndices(y);var F=m.get(1,1);var O=m.get(2,1);var L=false;if(h!=F||l!=O){L=true;F=h/F;O=l/O}if(L)C.scaleUV(F,O);t.addSubGeometry(C);if(this._debug)console.log("Parsed a TriangleSubGeometry")}d++}if(h!=1||l!=1)t.scaleUV(h,l);this.parseUserAttributes();this._pFinalizeAsset(t,a);this._blocks[e].data=t;if(this._debug){console.log("Parsed a TriangleGeometry: Name = "+a)}};t.prototype.parsePrimitves=function(e){var a;var r;var s;var i;var n;var o;a=this.parseVarStr();s=this._newBlockBytes.readUnsignedByte();n=this.parseProperties({101:this._geoNrType,102:this._geoNrType,103:this._geoNrType,110:this._geoNrType,111:this._geoNrType,301:t.UINT16,302:t.UINT16,303:t.UINT16,701:t.BOOL,702:t.BOOL,703:t.BOOL,704:t.BOOL});var h=["Unsupported Type-ID","PrimitivePlanePrefab","PrimitiveCubePrefab","PrimitiveSpherePrefab","PrimitiveCylinderPrefab","PrimitivesConePrefab","PrimitivesCapsulePrefab","PrimitivesTorusPrefab"];switch(s){case 1:r=new K(n.get(101,100),n.get(102,100),n.get(301,1),n.get(302,1),n.get(701,true),n.get(702,false));break;case 2:r=new V(n.get(101,100),n.get(102,100),n.get(103,100),n.get(301,1),n.get(302,1),n.get(303,1),n.get(701,true));break;case 3:r=new W(n.get(101,50),n.get(301,16),n.get(302,12),n.get(701,true));break;case 4:r=new z(n.get(101,50),n.get(102,50),n.get(103,100),n.get(301,16),n.get(302,1),true,true,true);if(!n.get(701,true))r.topClosed=false;if(!n.get(702,true))r.bottomClosed=false;if(!n.get(703,true))r.yUp=false;break;case 5:r=new G(n.get(101,50),n.get(102,100),n.get(301,16),n.get(302,1),n.get(701,true),n.get(702,true));break;case 6:r=new R(n.get(101,50),n.get(102,100),n.get(301,16),n.get(302,15),n.get(701,true));break;case 7:r=new H(n.get(101,50),n.get(102,50),n.get(301,16),n.get(302,8),n.get(701,true));break;default:r=new L;console.log("ERROR: UNSUPPORTED PREFAB_TYPE");break}if(n.get(110,1)!=1||n.get(111,1)!=1){}this.parseUserAttributes();r.name=a;this._pFinalizeAsset(r,a);this._blocks[e].data=r;if(this._debug){if(s<0||s>7){s=0}console.log("Parsed a Primivite: Name = "+a+"| type = "+h[s])}};t.prototype.parseContainer=function(e){var a;var r;var s;var i;var n;r=this._newBlockBytes.readUnsignedInt();s=this.parseMatrix3D();a=this.parseVarStr();var o="Root (TopLevel)";i=new M;i.transform.matrix3D=s;var h=this.getAssetByID(r,[M.assetType,N.assetType,A.assetType]);if(h[0]){var l=h[1].addChild(i);o=h[1].name}else if(r>0){this._blocks[e].addError("Could not find a parent for this ObjectContainer3D")}else{this._pContent.addChild(i)}if(this._version[0]==2&&this._version[1]==1){var c=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});i.pivot=new d(c.get(1,0),c.get(2,0),c.get(3,0))}else{this.parseProperties(null)}i.extra=this.parseUserAttributes();this._pFinalizeAsset(i,a);this._blocks[e].data=i;if(this._debug){console.log("Parsed a Container: Name = '"+a+"' | Parent-Name = "+o)}};t.prototype.parseMeshInstance=function(e){var a;var r;var s;var n=this._newBlockBytes.readUnsignedInt();var o=this.parseMatrix3D();var h=this.parseVarStr();var l="Root (TopLevel)";var c=this._newBlockBytes.readUnsignedInt();var p;var u=this.getAssetByID(c,[i.assetType]);if(u[0]){p=u[1]}else{this._blocks[e].addError("Could not find a Geometry for this Mesh. A empty Geometry is created!");p=new i}this._blocks[e].geoID=c;var _=new Array;a=this._newBlockBytes.readUnsignedShort();var y=new Array;r=0;var f;while(r<a){var m;m=this._newBlockBytes.readUnsignedInt();f=this.getAssetByID(m,[U.assetType]);if(!f[0]&&m>0){this._blocks[e].addError("Could not find Material Nr "+r+" (ID = "+m+" ) for this Mesh")}var b=f[1];_.push(b);y.push(b.name);r++}var v=new A(p,null);v.transform.matrix3D=o;var g=this.getAssetByID(n,[M.assetType,N.assetType,A.assetType]);if(g[0]){var w=g[1];w.addChild(v);l=w.name}else if(n>0){this._blocks[e].addError("Could not find a parent for this Mesh")}else{this._pContent.addChild(v)}if(_.length>=1&&v.subMeshes.length==1){v.material=_[0]}else if(_.length>1){var k;for(k=0;k<v.subMeshes.length;k++){v.subMeshes[k].material=_[Math.min(_.length-1,k)]}}if(this._version[0]==2&&this._version[1]==1){var B=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8,5:t.BOOL});v.pivot=new d(B.get(1,0),B.get(2,0),B.get(3,0));v.castsShadows=B.get(5,true)}else{this.parseProperties(null)}v.extra=this.parseUserAttributes();this._pFinalizeAsset(v,h);this._blocks[e].data=v;if(this._debug){console.log("Parsed a Mesh: Name = '"+h+"' | Parent-Name = "+l+"| Geometry-Name = "+p.name+" | SubMeshes = "+v.subMeshes.length+" | Mat-Names = "+y.toString())}};t.prototype.parseSkyboxInstance=function(e){var t=this.parseVarStr();var a=this._newBlockBytes.readUnsignedInt();var r=this.getAssetByID(a,[w.assetType],"CubeTexture");if(!r[0]&&a!=0)this._blocks[e].addError("Could not find the Cubetexture (ID = "+a+" ) for this Skybox");var s=new j(r[1]);this.parseProperties(null);s.extra=this.parseUserAttributes();this._pFinalizeAsset(s,t);this._blocks[e].data=s;if(this._debug)console.log("Parsed a Skybox: Name = '"+t+"' | CubeTexture-Name = "+r[1].name)};t.prototype.parseLight=function(e){var a;var r;var s=this._newBlockBytes.readUnsignedInt();var i=this.parseMatrix3D();var n=this.parseVarStr();var o=this._newBlockBytes.readUnsignedByte();var h=this.parseProperties({1:this._propsNrType,2:this._propsNrType,3:t.COLOR,4:this._propsNrType,5:this._propsNrType,6:t.BOOL,7:t.COLOR,8:this._propsNrType,9:t.UINT8,10:t.UINT8,11:this._propsNrType,12:t.UINT16,21:this._matrixNrType,22:this._matrixNrType,23:this._matrixNrType});var l=h.get(9,0);var d="Root (TopLevel)";var c=["Unsupported LightType","PointLight","DirectionalLight"];var p=["No ShadowMapper","DirectionalShadowMapper","NearDirectionalShadowMapper","CascadeShadowMapper","CubeMapShadowMapper"];if(o==1){a=new T;a.radius=h.get(1,9e4);a.fallOff=h.get(2,1e5);if(l>0){if(l==4){r=new F}}a.transform.matrix3D=i}if(o==2){a=new D(h.get(21,0),h.get(22,-1),h.get(23,1));

if(l>0){if(l==1){r=new O}}}a.color=h.get(3,16777215);a.specular=h.get(4,1);a.diffuse=h.get(5,1);a.ambientColor=h.get(7,16777215);a.ambient=h.get(8,0);if(r){if(r instanceof F){if(h.get(10,1)!=1){r.depthMapSize=this._depthSizeDic[h.get(10,1)]}}else{if(h.get(10,2)!=2){r.depthMapSize=this._depthSizeDic[h.get(10,2)]}}a.shadowMapper=r;a.castsShadows=true}if(s!=0){var u=this.getAssetByID(s,[M.assetType,N.assetType,A.assetType]);if(u[0]){u[1].addChild(a);d=u[1].name}else{this._blocks[e].addError("Could not find a parent for this Light")}}else{this._pContent.addChild(a)}this.parseUserAttributes();this._pFinalizeAsset(a,n);this._blocks[e].data=a;if(this._debug)console.log("Parsed a Light: Name = '"+n+"' | Type = "+c[o]+" | Parent-Name = "+d+" | ShadowMapper-Type = "+p[l])};t.prototype.parseCamera=function(e){var a=this._newBlockBytes.readUnsignedInt();var r=this.parseMatrix3D();var s=this.parseVarStr();var i="Root (TopLevel)";var n;this._newBlockBytes.readUnsignedByte();this._newBlockBytes.readShort();var o=this._newBlockBytes.readShort();var h=this.parseProperties({101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType});switch(o){case 5001:n=new y(h.get(101,60));break;case 5002:n=new f(h.get(101,500));break;case 5003:n=new m(h.get(101,-400),h.get(102,400),h.get(103,-300),h.get(104,300));break;default:console.log("unsupportedLenstype");return}var l=new x(n);l.transform.matrix3D=r;var c=this.getAssetByID(a,[M.assetType,N.assetType,A.assetType]);if(c[0]){var p=c[1];p.addChild(l);i=p.name}else if(a>0){this._blocks[e].addError("Could not find a parent for this Camera")}else{this._pContent.addChild(l)}l.name=s;h=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});l.pivot=new d(h.get(1,0),h.get(2,0),h.get(3,0));l.extra=this.parseUserAttributes();this._pFinalizeAsset(l,s);this._blocks[e].data=l;if(this._debug){console.log("Parsed a Camera: Name = '"+s+"' | Projectiontype = "+n+" | Parent-Name = "+i)}};t.prototype.parseLightPicker=function(e){var t=this.parseVarStr();var a=this._newBlockBytes.readUnsignedShort();var r=new Array;var s=0;var i=0;var n;var o=new Array;for(s=0;s<a;s++){i=this._newBlockBytes.readUnsignedInt();n=this.getAssetByID(i,[N.assetType]);if(n[0]){r.push(n[1]);o.push(n[1].name)}else{this._blocks[e].addError("Could not find a Light Nr "+s+" (ID = "+i+" ) for this LightPicker")}}if(r.length==0){this._blocks[e].addError("Could not create this LightPicker, cause no Light was found.");this.parseUserAttributes();return}var h=new C(r);h.name=t;this.parseUserAttributes();this._pFinalizeAsset(h,t);this._blocks[e].data=h;if(this._debug){console.log("Parsed a StaticLightPicker: Name = '"+t+"' | Texture-Name = "+o.toString())}};t.prototype.parseMaterial=function(e){var a;var r;var s;var i;var n;var o;var h;var l;var d;a=this.parseVarStr();r=this._newBlockBytes.readUnsignedByte();h=this._newBlockBytes.readUnsignedByte();s=this.parseProperties({1:t.INT32,2:t.BADDR,10:this._propsNrType,11:t.BOOL,12:this._propsNrType,13:t.BOOL});l=0;while(l<h){var c;c=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);this.parseUserAttributes();l+=1}var p="";n=this.parseUserAttributes();if(r===1){p+="Parsed a ColorMaterial(SinglePass): Name = '"+a+"' | ";var u;u=s.get(1,16777215);if(this.materialMode<2){i=new ie(u,s.get(10,1))}else{i=new ie(u);i.mode=se.MULTI_PASS}}else if(r===2){var _=s.get(2,0);d=this.getAssetByID(_,[w.assetType]);if(!d[0]&&_>0)this._blocks[e].addError("Could not find the DiffsueTexture (ID = "+_+" ) for this Material");i=new ie(d[1]);if(this.materialMode<2){i.alphaBlending=s.get(11,false);i.alpha=s.get(10,1);p+="Parsed a MethodMaterial(SinglePass): Name = '"+a+"' | Texture-Name = "+i.name}else{i.mode=se.MULTI_PASS;p+="Parsed a MethodMaterial(MultiPass): Name = '"+a+"' | Texture-Name = "+i.name}}i.extra=n;i.alphaThreshold=s.get(12,0);i.repeat=s.get(13,false);this._pFinalizeAsset(i,a);this._blocks[e].data=i;if(this._debug){console.log(p)}};t.prototype.parseMaterial_v1=function(e){var a;var r;var s;var i;var n=this.parseVarStr();var o=this._newBlockBytes.readUnsignedByte();var h=this._newBlockBytes.readUnsignedByte();var l=this.parseProperties({1:t.UINT32,2:t.BADDR,3:t.BADDR,4:t.UINT8,5:t.BOOL,6:t.BOOL,7:t.BOOL,8:t.BOOL,9:t.UINT8,10:this._propsNrType,11:t.BOOL,12:this._propsNrType,13:t.BOOL,15:this._propsNrType,16:t.UINT32,17:t.BADDR,18:this._propsNrType,19:this._propsNrType,20:t.UINT32,21:t.BADDR,22:t.BADDR});var d=l.get(4,0);var c="Parsed Material ";if(d>=2){this._blocks[e].addError("Material-spezialType '"+d+"' is not supported, can only be 0:singlePass, 1:MultiPass !");return}if(o<=2){if(this.materialMode==1)d=0;else if(this.materialMode==2)d=1;if(d<2){if(o==1){var p=l.get(1,13421772);if(d==1){a=new ie(p);a.mode=se.MULTI_PASS;c+="Parsed a ColorMaterial(MultiPass): Name = '"+n+"' | "}else{a=new ie(p,l.get(10,1));a.alphaBlending=l.get(11,false);c+="Parsed a ColorMaterial(SinglePass): Name = '"+n+"' | "}}else if(o==2){var u=l.get(2,0);i=this.getAssetByID(u,[w.assetType]);if(!i[0]&&u>0)this._blocks[e].addError("Could not find the AmbientTexture (ID = "+u+" ) for this MethodMaterial");var _=i[1];a=new ie(_);if(d==1){a.mode=se.MULTI_PASS;c+="Parsed a MethodMaterial(MultiPass): Name = '"+n+"' | Texture-Name = "+_.name}else{a.alpha=l.get(10,1);a.alphaBlending=l.get(11,false);c+="Parsed a MethodMaterial(SinglePass): Name = '"+n+"' | Texture-Name = "+_.name}}var y;var f=l.get(17,0);i=this.getAssetByID(f,[w.assetType]);if(!i[0]&&f!=0){this._blocks[e].addError("Could not find the DiffuseTexture (ID = "+f+" ) for this MethodMaterial")}if(i[0])y=i[1];if(y){a.diffuseTexture=y;c+=" | DiffuseTexture-Name = "+y.name}var m=l.get(3,0);i=this.getAssetByID(m,[w.assetType]);if(!i[0]&&m!=0){this._blocks[e].addError("Could not find the NormalTexture (ID = "+m+" ) for this MethodMaterial")}if(i[0]){r=i[1];c+=" | NormalTexture-Name = "+r.name}var b=l.get(21,0);i=this.getAssetByID(b,[w.assetType]);if(!i[0]&&b!=0){this._blocks[e].addError("Could not find the SpecularTexture (ID = "+b+" ) for this MethodMaterial")}if(i[0]){s=i[1];c+=" | SpecularTexture-Name = "+s.name}var v=l.get(22,0);i=this.getAssetByID(v,[E.assetType]);if(!i[0]&&v){this._blocks[e].addError("Could not find the LightPicker (ID = "+v+" ) for this MethodMaterial")}else{a.lightPicker=i[1]}a.smooth=l.get(5,true);a.mipmap=l.get(6,true);a.bothSides=l.get(7,false);a.alphaPremultiplied=l.get(8,false);a.blendMode=this.blendModeDic[l.get(9,0)];a.repeat=l.get(13,false);if(r)a.normalMap=r;if(s)a.specularMap=s;a.alphaThreshold=l.get(12,0);a.ambient=l.get(15,1);a.diffuseColor=l.get(16,16777215);a.specular=l.get(18,1);a.gloss=l.get(19,50);a.specularColor=l.get(20,16777215);var g=0;var k;while(g<h){var B;B=this._newBlockBytes.readUnsignedShort();l=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL,801:t.MTX4x4});switch(B){case 999:k=l.get(1,0);i=this.getAssetByID(k,[ve.assetType]);if(!i[0]){this._blocks[e].addError("Could not find the EffectMethod (ID = "+k+" ) for this Material")}else{a.addEffectMethod(i[1]);c+=" | EffectMethod-Name = "+i[1].name}break;case 998:k=l.get(1,0);i=this.getAssetByID(k,[Me.assetType]);if(!i[0]){this._blocks[e].addError("Could not find the ShadowMethod (ID = "+k+" ) for this Material")}else{a.shadowMethod=i[1];c+=" | ShadowMethod-Name = "+i[1].name}break;case 1:k=l.get(1,0);i=this.getAssetByID(k,[w.assetType],"CubeTexture");if(!i[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+k+" ) for this EnvMapAmbientMethodMaterial");a.ambientMethod=new ne(i[1]);c+=" | AmbientEnvMapMethod | EnvMap-Name ="+i[1].name;break;case 51:a.diffuseMethod=new oe;c+=" | DiffuseDepthMethod";break;case 52:k=l.get(1,0);i=this.getAssetByID(k,[w.assetType]);if(!i[0])this._blocks[e].addError("Could not find the GradientDiffuseTexture (ID = "+k+" ) for this GradientDiffuseMethod");a.diffuseMethod=new le(i[1]);c+=" | DiffuseGradientMethod | GradientDiffuseTexture-Name ="+i[1].name;break;case 53:a.diffuseMethod=new ce(l.get(101,5));c+=" | DiffuseWrapMethod";break;case 54:k=l.get(1,0);i=this.getAssetByID(k,[w.assetType]);if(!i[0])this._blocks[e].addError("Could not find the LightMap (ID = "+k+" ) for this LightMapDiffuseMethod");a.diffuseMethod=new de(i[1],this.blendModeDic[l.get(401,10)],false,a.diffuseMethod);c+=" | DiffuseLightMapMethod | LightMapTexture-Name ="+i[1].name;break;case 55:a.diffuseMethod=new he(l.get(401,3),a.diffuseMethod);a.diffuseMethod.smoothness=l.get(101,.1);c+=" | DiffuseCelMethod";break;case 56:break;case 101:a.specularMethod=new Te;c+=" | SpecularAnisotropicMethod";break;case 102:a.specularMethod=new Ae;c+=" | SpecularPhongMethod";break;case 103:a.specularMethod=new xe(l.get(101,.5),a.specularMethod);a.specularMethod.smoothness=l.get(102,.1);c+=" | SpecularCelMethod";break;case 104:a.specularMethod=new Ne(l.get(701,true),a.specularMethod);a.specularMethod.fresnelPower=l.get(101,5);a.specularMethod.normalReflectance=l.get(102,.1);c+=" | SpecularFresnelMethod";break;case 151:break;case 152:k=l.get(1,0);i=this.getAssetByID(k,[w.assetType]);if(!i[0])this._blocks[e].addError("Could not find the SecoundNormalMap (ID = "+k+" ) for this SimpleWaterNormalMethod");if(!a.normalMap)this._blocks[e].addError("Could not find a normal Map on this Material to use with this SimpleWaterNormalMethod");a.normalMap=i[1];a.normalMethod=new we(a.normalMap,i[1]);c+=" | NormalSimpleWaterMethod | Second-NormalTexture-Name = "+i[1].name;break}this.parseUserAttributes();g+=1}}}else if(o>=3&&o<=7){var p=l.get(1,13421772);c+=p;var y;var f=l.get(2,0);i=this.getAssetByID(f,[w.assetType]);if(!i[0]&&f!=0){this._blocks[e].addError("Could not find the DiffuseTexture (ID = "+f+" ) for this MethodMaterial");y=P.getDefaultTexture()}if(i[0])y=i[1];var M=new je(y);c+=" texture = "+f+" ";M.bothSides=true;M.preserveAlpha=true;M.alphaBlending=true;M.extra=this.parseUserAttributes();this._pFinalizeAsset(M,n);this._blocks[e].data=M;if(this._debug)console.log(c);return}a.extra=this.parseUserAttributes();this._pFinalizeAsset(a,n);this._blocks[e].data=a;if(this._debug){console.log(c)}};t.prototype.parseTexture=function(e){var t;this._blocks[e].name=this.parseVarStr();var a=this._newBlockBytes.readUnsignedByte();var r;this._texture_users[this._cur_block_id.toString()]=[];if(a==0){r=this._newBlockBytes.readUnsignedInt();var s;s=this._newBlockBytes.readUTFBytes(r);this._pAddDependency(this._cur_block_id.toString(),new p(s),false,null,true)}else{r=this._newBlockBytes.readUnsignedInt();var i;i=new k;this._newBlockBytes.readBytes(i,0,r);this._pAddDependency(this._cur_block_id.toString(),null,false,_.byteArrayToImage(i),true)}this.parseProperties(null);this._blocks[e].extras=this.parseUserAttributes();this._pPauseAndRetrieveDependencies();this._blocks[e].data=t;if(this._debug){var n=["external","embed"];console.log("Start parsing a "+n[a]+" Bitmap for Texture")}};t.prototype.parseCubeTexture=function(e){var t;var a;var r;this._cubeTextures=new Array;this._texture_users[this._cur_block_id.toString()]=[];var s=this._newBlockBytes.readUnsignedByte();this._blocks[e].name=this.parseVarStr();for(r=0;r<6;r++){this._texture_users[this._cur_block_id.toString()]=[];this._cubeTextures.push(null);if(s==0){t=this._newBlockBytes.readUnsignedInt();var i;i=this._newBlockBytes.readUTFBytes(t);this._pAddDependency(this._cur_block_id.toString()+"#"+r,new p(i),false,null,true)}else{t=this._newBlockBytes.readUnsignedInt();var n;n=new k;this._newBlockBytes.readBytes(n,0,t);this._pAddDependency(this._cur_block_id.toString()+"#"+r,null,false,_.byteArrayToImage(n),true)}}this.parseProperties(null);this._blocks[e].extras=this.parseUserAttributes();this._pPauseAndRetrieveDependencies();this._blocks[e].data=a;if(this._debug){var o=["external","embed"];console.log("Start parsing 6 "+o[s]+" Bitmaps for CubeTexture")}};t.prototype.parseSharedMethodBlock=function(e){var t;this._blocks[e].name=this.parseVarStr();t=this.parseSharedMethodList(e);this.parseUserAttributes();this._blocks[e].data=t;this._pFinalizeAsset(t,this._blocks[e].name);this._blocks[e].data=t;if(this._debug){console.log("Parsed a EffectMethod: Name = "+t.name+" Type = "+t)}};t.prototype.parseShadowMethodBlock=function(e){var t;var a;var r;var s;this._blocks[e].name=this.parseVarStr();s=this._newBlockBytes.readUnsignedInt();var i=this.getAssetByID(s,[N.assetType]);if(!i[0]){this._blocks[e].addError("Could not find the TargetLight (ID = "+s+" ) for this ShadowMethod - ShadowMethod not created");return}r=this.parseShadowMethodList(i[1],e);if(!r)return;this.parseUserAttributes();this._pFinalizeAsset(r,this._blocks[e].name);this._blocks[e].data=r;if(this._debug){console.log("Parsed a ShadowMapMethodMethod: Name = "+r.name+" | Type = "+r+" | Light-Name = ",i[1].name)}};t.prototype.parseCommand=function(e){var a=this._newBlockBytes.readUnsignedByte()==1;var r=this._newBlockBytes.readUnsignedInt();var s=this.parseMatrix3D();var i=this.parseVarStr();var n;var o;var h=this.getAssetByID(r,[M.assetType,N.assetType,A.assetType]);if(h[0]){n=h[1]}var l=this._newBlockBytes.readShort();var c=this._newBlockBytes.readShort();var p=this.parseProperties({1:t.BADDR});switch(c){case 1:var u=p.get(1,0);var _=this.getAssetByID(u,[N.assetType]);if(!_[0]&&u!=0){this._blocks[e].addError("Could not find the light (ID = "+u+" ( for this CommandBock!");return}o=_[1];if(n){n.addChild(o)}o.transform.matrix3D=s;break}if(o){p=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});o.pivot=new d(p.get(1,0),p.get(2,0),p.get(3,0));o.extra=this.parseUserAttributes()}this._blocks[e].data=o;if(this._debug){console.log("Parsed a CommandBlock: Name = '"+i)}};t.prototype.parseMetaData=function(e){var a=this.parseProperties({1:t.UINT32,2:t.AWDSTRING,3:t.AWDSTRING,4:t.AWDSTRING,5:t.AWDSTRING});if(this._debug){console.log("Parsed a MetaDataBlock: TimeStamp         = "+a.get(1,0));console.log("                        EncoderName       = "+a.get(2,"unknown"));console.log("                        EncoderVersion    = "+a.get(3,"unknown"));console.log("                        GeneratorName     = "+a.get(4,"unknown"));console.log("                        GeneratorVersion  = "+a.get(5,"unknown"))}};t.prototype.parseNameSpace=function(e){var t=this._newBlockBytes.readUnsignedByte();var a=this.parseVarStr();if(this._debug)console.log("Parsed a NameSpaceBlock: ID = "+t+" | String = "+a)};t.prototype.parseShadowMethodList=function(e,a){var r=this._newBlockBytes.readUnsignedShort();var s;var i=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL,801:t.MTX4x4});var n;var o;switch(r){case 1002:n=i.get(1,0);o=this.getAssetByID(n,[Me.assetType]);if(!o[0]){this._blocks[a].addError("Could not find the ShadowBaseMethod (ID = "+n+" ) for this ShadowNearMethod - ShadowMethod not created");return s}s=new Se(o[1]);break;case 1101:s=new Be(e);s.alpha=i.get(101,1);s.epsilon=i.get(102,.002);break;case 1102:s=new ke(e,i.get(201,5));s.alpha=i.get(101,1);s.epsilon=i.get(102,.002);s.range=i.get(103,1);break;case 1103:s=new Ie(e,i.get(201,5));s.alpha=i.get(101,1);s.epsilon=i.get(102,.002);s.range=i.get(103,1);break;case 1104:s=new De(e);s.alpha=i.get(101,1);s.epsilon=i.get(102,.002);break}this.parseUserAttributes();return s};t.prototype.parseSkeleton=function(e){var t=this.parseVarStr();var a=this._newBlockBytes.readUnsignedShort();var r=new $;this.parseProperties(null);var s=0;while(s<a){var i;var n;this._newBlockBytes.readUnsignedShort();i=new te;i.parentIndex=this._newBlockBytes.readUnsignedShort()-1;i.name=this.parseVarStr();n=this.parseMatrix3D();i.inverseBindPose=n.rawData;this.parseProperties(null);this.parseUserAttributes();r.joints.push(i);s++}this.parseUserAttributes();this._pFinalizeAsset(r,t);this._blocks[e].data=r;if(this._debug)console.log("Parsed a Skeleton: Name = "+r.name+" | Number of Joints = "+s)};t.prototype.parseSkeletonPose=function(e){var t=this.parseVarStr();var a=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);var r=new ee;var s=0;while(s<a){var i;var n;i=new Z;n=this._newBlockBytes.readUnsignedByte();if(n==1){var o=this.parseMatrix43RawData();var h=new l(o);i.orientation.fromMatrix(h);i.translation.copyFrom(h.position);r.jointPoses[s]=i}s++}this.parseUserAttributes();this._pFinalizeAsset(r,t);this._blocks[e].data=r;if(this._debug)console.log("Parsed a SkeletonPose: Name = "+r.name+" | Number of Joints = "+s)};t.prototype.parseSkeletonAnimation=function(e){var t;var a;var r=this.parseVarStr();var s=new ae;var i=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);var n=0;var o;while(n<i){a=this._newBlockBytes.readUnsignedInt();t=this._newBlockBytes.readUnsignedShort();o=this.getAssetByID(a,[ee.assetType]);if(!o[0])this._blocks[e].addError("Could not find the SkeletonPose Frame # "+n+" (ID = "+a+" ) for this SkeletonClipNode");else s.addFrame(this._blocks[a].data,t);n++}if(s.frames.length==0){this._blocks[e].addError("Could not this SkeletonClipNode, because no Frames where set.");return}this.parseUserAttributes();this._pFinalizeAsset(s,r);this._blocks[e].data=s;if(this._debug)console.log("Parsed a SkeletonClipNode: Name = "+s.name+" | Number of Frames = "+s.frames.length)};t.prototype.parseMeshPoseAnimation=function(e,a){if(a===void 0){a=false}var r=1;var s;var n;var h;var l;var d;var c;var p;var u;var _;var y;var f;var m=0;var b=new re;var v;var g;var w=0;var k=0;var B=new Array;var M;var N;var D=this.parseVarStr();var T=this._newBlockBytes.readUnsignedInt();var x=this.getAssetByID(T,[i.assetType]);if(!x[0]){this._blocks[e].addError("Could not find the target-Geometry-Object "+T+" ) for this VertexClipNode");return}var A=this.getUVForVertexAnimation(T);if(!a)r=this._newBlockBytes.readUnsignedShort();s=this._newBlockBytes.readUnsignedShort();w=this._newBlockBytes.readUnsignedShort();k=0;while(k<w){B.push(this._newBlockBytes.readUnsignedShort());k++}M=this.parseProperties({1:t.BOOL,2:t.BOOL});b.looping=M.get(1,true);b.stitchFinalFrame=M.get(2,false);n=0;while(n<r){l=this._newBlockBytes.readUnsignedShort();y=new i;h=0;while(h<s){k=0;u=this._newBlockBytes.readUnsignedInt();_=this._newBlockBytes.position+u;while(k<w){if(B[k]==1){v=x[1].subGeometries[h].indices;g=new Array;m=0;while(this._newBlockBytes.position<_){d=this.readNumber(this._accuracyGeo);c=this.readNumber(this._accuracyGeo);p=this.readNumber(this._accuracyGeo);g[m++]=d;g[m++]=c;g[m++]=p}f=new o(true);f.updateIndices(v);f.updatePositions(g);f.updateUVs(A[h]);f.updateVertexNormals(null);f.updateVertexTangents(null);f.autoDeriveNormals=false;f.autoDeriveTangents=false;h++;y.addSubGeometry(f)}else this._newBlockBytes.position=_;k++}}b.addFrame(y,l);n++}this.parseUserAttributes();this._pFinalizeAsset(b,D);this._blocks[e].data=b;if(this._debug)console.log("Parsed a VertexClipNode: Name = "+b.name+" | Target-Geometry-Name = "+x[1].name+" | Number of Frames = "+b.frames.length)};t.prototype.parseVertexAnimationSet=function(e){var a;var r="";var s=this.parseVarStr();var i=this._newBlockBytes.readUnsignedShort();var n=this.parseProperties({1:t.UINT16});var o=0;var h=new Array;var l=new Array;while(o<i){a=this._newBlockBytes.readUnsignedInt();var d=this.getAssetByID(a,[B.assetType]);if(!d[0])this._blocks[e].addError("Could not find the AnimationClipNode Nr "+o+" ( "+a+" ) for this AnimationSet");else{if(d[1]instanceof re)l.push(d[1]);if(d[1]instanceof ae)h.push(d[1])}o++}if(l.length==0&&h.length==0){this._blocks[e].addError("Could not create this AnimationSet, because it contains no animations");return}this.parseUserAttributes();if(l.length>0){var c=new Q;for(var p=0;p<l.length;p++)c.addAnimation(l[p]);this._pFinalizeAsset(c,s);this._blocks[e].data=c;if(this._debug)console.log("Parsed a VertexAnimationSet: Name = "+s+" | Animations = "+c.animations.length+" | Animation-Names = "+c.animationNames.toString())}else if(h.length>0){d=this.getAssetByID(a,[B.assetType]);var u=new q(n.get(1,4));for(var p=0;p<h.length;p++)u.addAnimation(h[p]);this._pFinalizeAsset(u,s);this._blocks[e].data=u;if(this._debug)console.log("Parsed a SkeletonAnimationSet: Name = "+s+" | Animations = "+u.animations.length+" | Animation-Names = "+u.animationNames.toString())}};t.prototype.parseAnimatorSet=function(e){var a;var r;var s;var i="";var n=this.parseVarStr();var o=this._newBlockBytes.readUnsignedShort();var h=this.parseProperties({1:t.BADDR});r=this._newBlockBytes.readUnsignedInt();var l=this._newBlockBytes.readUnsignedShort();var d=new Array;for(var c=0;c<l;c++)d.push(this._newBlockBytes.readUnsignedInt());var p=this._newBlockBytes.readUnsignedShort();var u=this._newBlockBytes.readUnsignedByte()==1;this.parseUserAttributes();this.parseUserAttributes();var _;var y=new Array;for(c=0;c<d.length;c++){_=this.getAssetByID(d[c],[A.assetType]);if(_[0])y.push(_[1])}_=this.getAssetByID(r,[J.assetType]);if(!_[0]){this._blocks[e].addError("Could not find the AnimationSet ( "+r+" ) for this Animator");return}s=_[1];var f;if(o==1){_=this.getAssetByID(h.get(1,0),[$.assetType]);if(!_[0]){this._blocks[e].addError("Could not find the Skeleton ( "+h.get(1,0)+" ) for this Animator");return}f=new Y(s,_[1])}else if(o==2)f=new X(s);this._pFinalizeAsset(f,n);this._blocks[e].data=f;for(c=0;c<y.length;c++){if(o==1)y[c].animator=f;if(o==2)y[c].animator=f}if(this._debug)console.log("Parsed a Animator: Name = "+n)};t.prototype.parseSharedMethodList=function(e){var a=this._newBlockBytes.readUnsignedShort();var r;var s=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType,105:this._propsNrType,106:this._propsNrType,107:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL});var i;var n;switch(a){case 401:r=new ue(s.get(101,new Array(0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)));break;case 402:r=new _e;var o=s.get(601,0);r.colorTransform=new h(s.get(102,1),s.get(103,1),s.get(104,1),s.get(101,1),o>>16&255,o>>8&255,o&255,o>>24&255);break;case 403:i=s.get(1,0);console.log("ENV MAP",i);n=this.getAssetByID(i,[w.assetType],"CubeTexture");if(!n[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+i+" ) for this EnvMapMethod");r=new ye(n[1],s.get(101,1));i=s.get(2,0);if(i>0){n=this.getAssetByID(i,[w.assetType]);if(!n[0])this._blocks[e].addError("Could not find the Mask-texture (ID = "+i+" ) for this EnvMapMethod")}break;case 404:i=s.get(1,0);n=this.getAssetByID(i,[w.assetType]);if(!n[0])this._blocks[e].addError("Could not find the LightMap (ID = "+i+" ) for this LightMapMethod");r=new be(n[1],this.blendModeDic[s.get(401,10)]);break;case 406:r=new ge(s.get(601,16777215),s.get(101,.4),s.get(101,2));break;case 407:i=s.get(1,0);n=this.getAssetByID(i,[w.assetType]);if(!n[0])this._blocks[e].addError("Could not find the Alpha-texture (ID = "+i+" ) for this AlphaMaskMethod");r=new pe(n[1],s.get(701,false));break;case 410:i=s.get(1,0);n=this.getAssetByID(i,[w.assetType],"CubeTexture");if(!n[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+i+" ) for this FresnelEnvMapMethod");r=new me(n[1],s.get(101,1));break;case 411:r=new fe(s.get(101,0),s.get(102,1e3),s.get(601,8421504));break}this.parseUserAttributes();return r};t.prototype.parseUserAttributes=function(){var e;var a;var r;a=this._newBlockBytes.readUnsignedInt();if(a>0){var s;e={};s=this._newBlockBytes.position+a;while(this._newBlockBytes.position<s){var i;var n;var o;var h;var l;i=this._newBlockBytes.readUnsignedByte();n=this.parseVarStr();o=this._newBlockBytes.readUnsignedByte();h=this._newBlockBytes.readUnsignedInt();if(this._newBlockBytes.position+h>s){console.log("           Error in reading attribute # "+r+" = skipped to end of attribute-list");this._newBlockBytes.position=s;return e}switch(o){case t.AWDSTRING:l=this._newBlockBytes.readUTFBytes(h);break;case t.INT8:l=this._newBlockBytes.readByte();break;case t.INT16:l=this._newBlockBytes.readShort();break;case t.INT32:l=this._newBlockBytes.readInt();break;case t.BOOL:case t.UINT8:l=this._newBlockBytes.readUnsignedByte();break;case t.UINT16:l=this._newBlockBytes.readUnsignedShort();break;case t.UINT32:case t.BADDR:l=this._newBlockBytes.readUnsignedInt();break;case t.FLOAT32:l=this._newBlockBytes.readFloat();break;case t.FLOAT64:l=this._newBlockBytes.readDouble();break;default:l="unimplemented attribute type "+o;this._newBlockBytes.position+=h;break}if(this._debug){console.log("attribute = name: "+n+"  / value = "+l)}e[n]=l;r+=1}}return e};t.prototype.parseProperties=function(e){var t;var a;var r=0;var s=new Je;a=this._newBlockBytes.readUnsignedInt();t=this._newBlockBytes.position+a;if(e){while(this._newBlockBytes.position<t){var i;var n;var o;n=this._newBlockBytes.readUnsignedShort();i=this._newBlockBytes.readUnsignedInt();if(this._newBlockBytes.position+i>t){console.log("           Error in reading property # "+r+" = skipped to end of propertie-list");this._newBlockBytes.position=t;return s}if(e.hasOwnProperty(n.toString())){o=e[n];s.set(n,this.parseAttrValue(o,i))}else{this._newBlockBytes.position+=i}r+=1}}else{this._newBlockBytes.position=t}return s};t.prototype.parseAttrValue=function(e,a){var r;var s;switch(e){case t.BOOL:case t.INT8:r=1;s=this._newBlockBytes.readByte;break;case t.INT16:r=2;s=this._newBlockBytes.readShort;break;case t.INT32:r=4;s=this._newBlockBytes.readInt;break;case t.UINT8:r=1;s=this._newBlockBytes.readUnsignedByte;break;case t.UINT16:r=2;s=this._newBlockBytes.readUnsignedShort;break;case t.UINT32:case t.COLOR:case t.BADDR:r=4;s=this._newBlockBytes.readUnsignedInt;break;case t.FLOAT32:r=4;s=this._newBlockBytes.readFloat;break;case t.FLOAT64:r=8;s=this._newBlockBytes.readDouble;break;case t.AWDSTRING:return this._newBlockBytes.readUTFBytes(a);case t.VECTOR2x1:case t.VECTOR3x1:case t.VECTOR4x1:case t.MTX3x2:case t.MTX3x3:case t.MTX4x3:case t.MTX4x4:r=8;s=this._newBlockBytes.readDouble;break}if(r<a){var i=[];var n=0;var o=a/r;while(n<o){i.push(s.apply(this._newBlockBytes));n++}return i}else{var h=s.apply(this._newBlockBytes);return h}};t.prototype.parseHeader=function(){var e;var a;this._byteData.position=3;this._version[0]=this._byteData.readUnsignedByte();this._version[1]=this._byteData.readUnsignedByte();e=this._byteData.readUnsignedShort();this._streaming=Qe.test(e,Qe.FLAG1);if(this._version[0]==2&&this._version[1]==1){this._accuracyMatrix=Qe.test(e,Qe.FLAG2);this._accuracyGeo=Qe.test(e,Qe.FLAG3);this._accuracyProps=Qe.test(e,Qe.FLAG4)}this._geoNrType=t.FLOAT32;if(this._accuracyGeo){this._geoNrType=t.FLOAT64}this._matrixNrType=t.FLOAT32;if(this._accuracyMatrix){this._matrixNrType=t.FLOAT64}this._propsNrType=t.FLOAT32;if(this._accuracyProps){this._propsNrType=t.FLOAT64}this._compression=this._byteData.readUnsignedByte();if(this._debug){console.log("Import AWDFile of version = "+this._version[0]+" - "+this._version[1]);console.log("Global Settings = Compression = "+this._compression+" | Streaming = "+this._streaming+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps)}a=this._byteData.readUnsignedInt();if(!this._streaming&&a!=this._byteData.getBytesAvailable()){this._pDieWithError("AWD2 body length does not match header integrity field")}};t.prototype.getUVForVertexAnimation=function(e){if(this._blocks[e].data instanceof A)e=this._blocks[e].geoID;if(this._blocks[e].uvsForVertexAnimation)return this._blocks[e].uvsForVertexAnimation;var t=this._blocks[e].data;var a=0;var r;var s;var i;var n;var h;var l;var d;this._blocks[e].uvsForVertexAnimation=new Array;while(a<t.subGeometries.length){l=new Array;d=t.subGeometries[a];n=d.numVertices;r=d.uvs;s=d.getStride(o.UV_DATA);i=d.getOffset(o.UV_DATA);for(h=0;h<n;h++){l.push(r[i+h*s+0]);l.push(r[i+h*s+1])}this._blocks[e].uvsForVertexAnimation.push(l);a++}return this._blocks[e].uvsForVertexAnimation};t.prototype.parseVarStr=function(){var e=this._newBlockBytes.readUnsignedShort();return this._newBlockBytes.readUTFBytes(e)};t.prototype.getAssetByID=function(e,t,a){if(a===void 0){a="SingleTexture"}var r=new Array;var s=0;if(e>0){if(this._blocks[e]){if(this._blocks[e].data){while(s<t.length){var n=this._blocks[e].data;if(n.assetType==t[s]){if(t[s]==w.assetType&&a=="CubeTexture"){if(this._blocks[e].data instanceof v){r.push(true);r.push(this._blocks[e].data);return r}}if(t[s]==w.assetType&&a=="SingleTexture"){if(this._blocks[e].data instanceof g){r.push(true);r.push(this._blocks[e].data);return r}}else{r.push(true);r.push(this._blocks[e].data);return r}}if(t[s]==i.assetType&&n.assetType==A.assetType){var o=this._blocks[e].data;r.push(true);r.push(o.geometry);return r}s++}}}}r.push(false);r.push(this.getDefaultAsset(t[0],a));return r};t.prototype.getDefaultAsset=function(e,t){switch(true){case e==w.assetType:if(t=="CubeTexture")return this.getDefaultCubeTexture();if(t=="SingleTexture")return P.getDefaultTexture();break;case e==U.assetType:return P.getDefaultMaterial();break;default:break}return null};t.prototype.getDefaultCubeTexture=function(){if(!this._defaultCubeTexture){var e=P.createCheckeredBitmapData();this._defaultCubeTexture=new b(e,e,e,e,e,e);this._defaultCubeTexture.name="defaultCubeTexture"}return this._defaultCubeTexture};t.prototype.readNumber=function(e){if(e===void 0){e=false}if(e)return this._newBlockBytes.readDouble();return this._newBlockBytes.readFloat()};t.prototype.parseMatrix3D=function(){return new l(this.parseMatrix43RawData())};t.prototype.parseMatrix32RawData=function(){var e;var t=new Array(6);for(e=0;e<6;e++){t[e]=this._newBlockBytes.readFloat()}return t};t.prototype.parseMatrix43RawData=function(){var e=new Array(16);e[0]=this.readNumber(this._accuracyMatrix);e[1]=this.readNumber(this._accuracyMatrix);e[2]=this.readNumber(this._accuracyMatrix);e[3]=0;e[4]=this.readNumber(this._accuracyMatrix);e[5]=this.readNumber(this._accuracyMatrix);e[6]=this.readNumber(this._accuracyMatrix);e[7]=0;e[8]=this.readNumber(this._accuracyMatrix);e[9]=this.readNumber(this._accuracyMatrix);e[10]=this.readNumber(this._accuracyMatrix);e[11]=0;e[12]=this.readNumber(this._accuracyMatrix);e[13]=this.readNumber(this._accuracyMatrix);e[14]=this.readNumber(this._accuracyMatrix);e[15]=1;if(isNaN(e[0])){e[0]=1;e[1]=0;e[2]=0;e[4]=0;e[5]=1;e[6]=0;e[8]=0;e[9]=0;e[10]=1;e[12]=0;e[13]=0;e[14]=0}return e};t.COMPRESSIONMODE_LZMA="lzma";t.UNCOMPRESSED=0;t.DEFLATE=1;t.LZMA=2;t.INT8=1;t.INT16=2;t.INT32=3;t.UINT8=4;t.UINT16=5;t.UINT32=6;t.FLOAT32=7;t.FLOAT64=8;t.BOOL=21;t.COLOR=22;t.BADDR=23;t.AWDSTRING=31;t.AWDBYTEARRAY=32;t.VECTOR2x1=41;t.VECTOR3x1=42;t.VECTOR4x1=43;t.MTX3x2=44;t.MTX3x3=45;t.MTX4x3=46;t.MTX4x4=47;return t}(u);var He=function(){function e(){}e.prototype.dispose=function(){this.id=null;this.bytes=null;this.errorMessages=null;this.uvsForVertexAnimation=null};e.prototype.addError=function(e){if(!this.errorMessages)this.errorMessages=new Array;this.errorMessages.push(e)};return e}();var Je=function(){function e(){}e.prototype.set=function(e,t){this[e.toString()]=t};e.prototype.get=function(e,t){if(this.hasOwnProperty(e.toString())){return this[e.toString()]}else{return t}};return e}();var Qe=function(){function e(){}e.test=function(e,t){return(e&t)==t};e.FLAG1=1;e.FLAG2=2;e.FLAG3=4;e.FLAG4=8;e.FLAG5=16;e.FLAG6=32;e.FLAG7=64;e.FLAG8=128;e.FLAG9=256;e.FLAG10=512;e.FLAG11=1024;e.FLAG12=2048;e.FLAG13=4096;e.FLAG14=8192;e.FLAG15=16384;e.FLAG16=32768;return e}();t.exports=We},{"awayjs-core/lib/data/BlendMode":undefined,"awayjs-core/lib/data/CurveSubGeometry":undefined,"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/data/TriangleSubGeometry":undefined,"awayjs-core/lib/geom/ColorTransform":undefined,"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Vector3D":undefined,
"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-core/lib/projections/OrthographicOffCenterProjection":undefined,"awayjs-core/lib/projections/OrthographicProjection":undefined,"awayjs-core/lib/projections/PerspectiveProjection":undefined,"awayjs-core/lib/textures/BitmapCubeTexture":undefined,"awayjs-core/lib/textures/ImageCubeTexture":undefined,"awayjs-core/lib/textures/ImageTexture":undefined,"awayjs-core/lib/textures/TextureBase":undefined,"awayjs-core/lib/utils/ByteArray":undefined,"awayjs-display/lib/animators/nodes/AnimationNodeBase":undefined,"awayjs-display/lib/base/LightBase":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/entities/Billboard":undefined,"awayjs-display/lib/entities/Camera":undefined,"awayjs-display/lib/entities/DirectionalLight":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/entities/PointLight":undefined,"awayjs-display/lib/entities/Skybox":undefined,"awayjs-display/lib/entities/TextField":undefined,"awayjs-display/lib/managers/DefaultMaterialManager":undefined,"awayjs-display/lib/materials/BasicMaterial":undefined,"awayjs-display/lib/materials/CurveMaterial":undefined,"awayjs-display/lib/materials/MaterialBase":undefined,"awayjs-display/lib/materials/lightpickers/LightPickerBase":undefined,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":undefined,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":undefined,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":undefined,"awayjs-display/lib/prefabs/PrefabBase":undefined,"awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":undefined,"awayjs-display/lib/prefabs/PrimitiveConePrefab":undefined,"awayjs-display/lib/prefabs/PrimitiveCubePrefab":undefined,"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":undefined,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":undefined,"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":undefined,"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":undefined,"awayjs-display/lib/text/Font":undefined,"awayjs-display/lib/text/TextFormat":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/MethodMaterialMode":undefined,"awayjs-methodmaterials/lib/methods/AmbientEnvMapMethod":undefined,"awayjs-methodmaterials/lib/methods/DiffuseCelMethod":undefined,"awayjs-methodmaterials/lib/methods/DiffuseDepthMethod":undefined,"awayjs-methodmaterials/lib/methods/DiffuseGradientMethod":undefined,"awayjs-methodmaterials/lib/methods/DiffuseLightMapMethod":undefined,"awayjs-methodmaterials/lib/methods/DiffuseWrapMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectAlphaMaskMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectColorMatrixMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectColorTransformMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectFogMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectFresnelEnvMapMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectLightMapMethod":undefined,"awayjs-methodmaterials/lib/methods/EffectMethodBase":undefined,"awayjs-methodmaterials/lib/methods/EffectRimLightMethod":undefined,"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod":undefined,"awayjs-methodmaterials/lib/methods/ShadowDitheredMethod":undefined,"awayjs-methodmaterials/lib/methods/ShadowFilteredMethod":undefined,"awayjs-methodmaterials/lib/methods/ShadowHardMethod":undefined,"awayjs-methodmaterials/lib/methods/ShadowMapMethodBase":undefined,"awayjs-methodmaterials/lib/methods/ShadowNearMethod":undefined,"awayjs-methodmaterials/lib/methods/ShadowSoftMethod":undefined,"awayjs-methodmaterials/lib/methods/SpecularAnisotropicMethod":undefined,"awayjs-methodmaterials/lib/methods/SpecularCelMethod":undefined,"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod":undefined,"awayjs-methodmaterials/lib/methods/SpecularPhongMethod":undefined,"awayjs-player/lib/factories/AS2SceneGraphFactory":undefined,"awayjs-player/lib/timeline/TimelineKeyFrame":undefined,"awayjs-player/lib/timeline/commands/AddChildAtDepthCommand":undefined,"awayjs-player/lib/timeline/commands/ApplyAS2DepthsCommand":undefined,"awayjs-player/lib/timeline/commands/ExecuteScriptCommand":undefined,"awayjs-player/lib/timeline/commands/RemoveChildrenAtDepthCommand":undefined,"awayjs-player/lib/timeline/commands/SetInstanceNameCommand":undefined,"awayjs-player/lib/timeline/commands/SetMaskCommand":undefined,"awayjs-player/lib/timeline/commands/UpdatePropertyCommand":undefined,"awayjs-renderergl/lib/animators/AnimationSetBase":undefined,"awayjs-renderergl/lib/animators/SkeletonAnimationSet":undefined,"awayjs-renderergl/lib/animators/SkeletonAnimator":undefined,"awayjs-renderergl/lib/animators/VertexAnimationSet":undefined,"awayjs-renderergl/lib/animators/VertexAnimator":undefined,"awayjs-renderergl/lib/animators/data/JointPose":undefined,"awayjs-renderergl/lib/animators/data/Skeleton":undefined,"awayjs-renderergl/lib/animators/data/SkeletonJoint":undefined,"awayjs-renderergl/lib/animators/data/SkeletonPose":undefined,"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":undefined,"awayjs-renderergl/lib/animators/nodes/VertexClipNode":undefined}],"awayjs-parsers/lib/MD2Parser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/data/Geometry");var i=e("awayjs-core/lib/data/TriangleSubGeometry");var n=e("awayjs-core/lib/net/URLLoaderDataFormat");var o=e("awayjs-core/lib/net/URLRequest");var h=e("awayjs-core/lib/parsers/ParserBase");var l=e("awayjs-core/lib/parsers/ParserUtils");var d=e("awayjs-display/lib/containers/DisplayObjectContainer");var c=e("awayjs-display/lib/entities/Mesh");var p=e("awayjs-display/lib/managers/DefaultMaterialManager");var u=e("awayjs-renderergl/lib/animators/nodes/VertexClipNode");var _=e("awayjs-renderergl/lib/animators/VertexAnimationSet");var y=e("awayjs-methodmaterials/lib/MethodMaterial");var f=e("awayjs-methodmaterials/lib/MethodMaterialMode");var m=function(e){r(t,e);function t(t,a){if(t===void 0){t="jpg"}if(a===void 0){a=true}e.call(this,n.ARRAY_BUFFER);this._clipNodes=new Object;this._animationSet=new _;this.materialFinal=false;this.geoCreated=false;this._textureType=t;this._ignoreTexturePath=a}t.supportsType=function(e){e=e.toLowerCase();return e=="md2"};t.supportsData=function(e){return l.toString(e,4)=="IDP2"};t.prototype._iResolveDependency=function(e){if(e.assets.length!=1)return;var t=e.assets[0];if(t){var a=new y(t);if(this.materialMode>=2)a.mode=f.MULTI_PASS;this._pContent.addChild(this._mesh);a.name=this._mesh.material.name;this._mesh.material=a;this._pFinalizeAsset(a);this._pFinalizeAsset(this._mesh.geometry);this._pFinalizeAsset(this._mesh)}this.materialFinal=true};t.prototype._iResolveDependencyFailure=function(e){if(this.materialMode<2){this._mesh.material=p.getDefaultMaterial()}else{this._mesh.material=new y(p.getDefaultTexture());this._mesh.material.mode=f.MULTI_PASS}this._pContent.addChild(this._mesh);this._pFinalizeAsset(this._mesh.geometry);this._pFinalizeAsset(this._mesh);this.materialFinal=true};t.prototype._pProceedParsing=function(){if(!this._startedParsing){this._byteData=this._pGetByteData();this._startedParsing=true;this._byteData.position=0}while(this._pHasTime()){if(!this._parsedHeader){this._geometry=new s;this._mesh=new c(this._geometry,null);if(this.materialMode<2){this._mesh.material=p.getDefaultMaterial()}else{this._mesh.material=new y(p.getDefaultTexture());this._mesh.material.mode=f.MULTI_PASS}this.parseHeader();this.parseMaterialNames()}else if(!this._parsedUV){this.parseUV()}else if(!this._parsedFaces){this.parseFaces()}else if(!this._parsedFrames){this.parseFrames()}else if(this.geoCreated&&this.materialFinal){return h.PARSING_DONE}else if(!this.geoCreated){this.geoCreated=true;this._geometry.addSubGeometry(this._firstSubGeom.clone());this._mesh.name="";if(this.materialFinal){this._pContent.addChild(this._mesh);this._pFinalizeAsset(this._mesh.geometry);this._pFinalizeAsset(this._mesh)}this._pPauseAndRetrieveDependencies()}}return h.MORE_TO_PARSE};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new d};t.prototype.parseHeader=function(){this._ident=this._byteData.readInt();this._version=this._byteData.readInt();this._skinWidth=this._byteData.readInt();this._skinHeight=this._byteData.readInt();this._byteData.readInt();this._numSkins=this._byteData.readInt();this._numVertices=this._byteData.readInt();this._numST=this._byteData.readInt();this._numTris=this._byteData.readInt();this._byteData.readInt();this._numFrames=this._byteData.readInt();this._offsetSkins=this._byteData.readInt();this._offsetST=this._byteData.readInt();this._offsetTris=this._byteData.readInt();this._offsetFrames=this._byteData.readInt();this._byteData.readInt();this._offsetEnd=this._byteData.readInt();this._parsedHeader=true};t.prototype.parseMaterialNames=function(){var e;var t;var a;var r;this._materialNames=new Array;this._byteData.position=this._offsetSkins;var s=new RegExp("[^a-zA-Z0-9\\_/.]","g");for(var i=0;i<this._numSkins;++i){t=this._byteData.readUTFBytes(64);t=t.replace(s,"");a=t.lastIndexOf(".");if(this._ignoreTexturePath)r=t.lastIndexOf("/");if(t.toLowerCase().indexOf(".jpg")==-1&&t.toLowerCase().indexOf(".png")==-1){t=t.substring(r+1,a);e=t+"."+this._textureType}else{e=t}this._materialNames[i]=t;if(this.dependencies.length==0)this._pAddDependency(t,new o(e))}if(this._materialNames.length>0)this._mesh.material.name=this._materialNames[0];else this.materialFinal=true};t.prototype.parseUV=function(){var e=0;this._uvs=new Array(this._numST*2);this._byteData.position=this._offsetST;for(var t=0;t<this._numST;t++){this._uvs[e++]=this._byteData.readShort()/this._skinWidth;this._uvs[e++]=this._byteData.readShort()/this._skinHeight}this._parsedUV=true};t.prototype.parseFaces=function(){var e,t,a,r,s,i;var n;this._vertIndices=new Array;this._uvIndices=new Array;this._indices=new Array;this._byteData.position=this._offsetTris;for(n=0;n<this._numTris;n++){e=this._byteData.readUnsignedShort();t=this._byteData.readUnsignedShort();a=this._byteData.readUnsignedShort();r=this._byteData.readUnsignedShort();s=this._byteData.readUnsignedShort();i=this._byteData.readUnsignedShort();this.addIndex(e,r);this.addIndex(t,s);this.addIndex(a,i)}var o=this._uvIndices.length;this._finalUV=new Array(o*2);for(n=0;n<o;++n){this._finalUV[n<<1]=this._uvs[this._uvIndices[n]<<1];this._finalUV[(n<<1)+1]=this._uvs[(this._uvIndices[n]<<1)+1]}this._parsedFaces=true};t.prototype.addIndex=function(e,t){var a=this.findIndex(e,t);if(a==-1){this._indices.push(this._vertIndices.length);this._vertIndices.push(e);this._uvIndices.push(t)}else this._indices.push(a)};t.prototype.findIndex=function(e,t){var a=this._vertIndices.length;for(var r=0;r<a;++r){if(this._vertIndices[r]==e&&this._uvIndices[r]==t)return r}return-1};t.prototype.parseFrames=function(){var e,a,r;var n,o,h;var l;var d;var c=this._vertIndices.length;var p;var _;var y,f,m;var b="";var v=null;this._byteData.position=this._offsetFrames;for(y=0;y<this._numFrames;y++){_=new Array;p=new Array(c*3);e=this._byteData.readFloat();a=this._byteData.readFloat();r=this._byteData.readFloat();n=this._byteData.readFloat();o=this._byteData.readFloat();h=this._byteData.readFloat();b=this.readFrameName();for(f=0;f<this._numVertices;f++,this._byteData.position++)_.push(e*this._byteData.readUnsignedByte()+n,a*this._byteData.readUnsignedByte()+o,r*this._byteData.readUnsignedByte()+h);m=0;for(f=0;f<c;f++){p[m++]=_[this._vertIndices[f]*3];p[m++]=_[this._vertIndices[f]*3+2];p[m++]=_[this._vertIndices[f]*3+1]}d=new i(true);if(this._firstSubGeom==null)this._firstSubGeom=d;l=new s;l.addSubGeometry(d);d.updateIndices(this._indices);d.updatePositions(p);d.updateUVs(this._finalUV);d.vertexNormals;d.vertexTangents;d.autoDeriveNormals=false;d.autoDeriveTangents=false;var g=this._clipNodes[b];if(!g){if(v){this._pFinalizeAsset(v);this._animationSet.addAnimation(v)}g=new u;g.name=b;g.stitchFinalFrame=true;this._clipNodes[b]=g;v=g}g.addFrame(l,1e3/t.FPS)}if(v){this._pFinalizeAsset(v);this._animationSet.addAnimation(v)}this._pFinalizeAsset(this._animationSet);this._parsedFrames=true};t.prototype.readFrameName=function(){var e="";var t=0;for(var a=0;a<16;a++){var r=this._byteData.readUnsignedByte();if(Math.floor(r)>57&&Math.floor(r)<=122&&t==0)e+=String.fromCharCode(r);if(Math.floor(r)>=48&&Math.floor(r)<=57)t++}return e};t.FPS=6;return t}(h);t.exports=m},{"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/data/TriangleSubGeometry":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/managers/DefaultMaterialManager":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/MethodMaterialMode":undefined,"awayjs-renderergl/lib/animators/VertexAnimationSet":undefined,"awayjs-renderergl/lib/animators/nodes/VertexClipNode":undefined}],"awayjs-parsers/lib/MD5AnimParser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Quaternion");var i=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-core/lib/net/URLLoaderDataFormat");var o=e("awayjs-core/lib/parsers/ParserBase");var h=e("awayjs-renderergl/lib/animators/data/JointPose");var l=e("awayjs-renderergl/lib/animators/data/SkeletonPose");var d=e("awayjs-renderergl/lib/animators/nodes/SkeletonClipNode");var c=function(e){r(t,e);function t(t,a){if(t===void 0){t=null}if(a===void 0){a=0}e.call(this,n.TEXT);this._parseIndex=0;this._line=0;this._charLineIndex=0;this._rotationQuat=new s;var r=new s;var o=new s;r.fromAxisAngle(i.X_AXIS,-Math.PI*.5);o.fromAxisAngle(i.Y_AXIS,-Math.PI*.5);this._rotationQuat.multiply(o,r);if(t){this._rotationQuat.multiply(o,r);r.fromAxisAngle(t,a);this._rotationQuat.multiply(r,this._rotationQuat)}}t.supportsType=function(e){e=e.toLowerCase();return e=="md5anim"};t.supportsData=function(e){return false};t.prototype._pProceedParsing=function(){var e;if(!this._startedParsing){this._textData=this._pGetTextData();this._startedParsing=true}while(this._pHasTime()){e=this.getNextToken();switch(e){case t.COMMENT_TOKEN:this.ignoreLine();break;case"":break;case t.VERSION_TOKEN:this._version=this.getNextInt();if(this._version!=10)throw new Error("Unknown version number encountered!");break;case t.COMMAND_LINE_TOKEN:this.parseCMD();break;case t.NUM_FRAMES_TOKEN:this._numFrames=this.getNextInt();this._bounds=new Array;this._frameData=new Array;break;case t.NUM_JOINTS_TOKEN:this._numJoints=this.getNextInt();this._hierarchy=new Array(this._numJoints);this._baseFrameData=new Array(this._numJoints);break;case t.FRAME_RATE_TOKEN:this._frameRate=this.getNextInt();break;case t.NUM_ANIMATED_COMPONENTS_TOKEN:this._numAnimatedComponents=this.getNextInt();break;case t.HIERARCHY_TOKEN:this.parseHierarchy();break;case t.BOUNDS_TOKEN:this.parseBounds();break;case t.BASE_FRAME_TOKEN:this.parseBaseFrame();break;case t.FRAME_TOKEN:this.parseFrame();break;default:if(!this._reachedEOF)this.sendUnknownKeywordError()}if(this._reachedEOF){this._clip=new d;this.translateClip();this._pFinalizeAsset(this._clip);return o.PARSING_DONE}}return o.MORE_TO_PARSE};t.prototype.translateClip=function(){for(var e=0;e<this._numFrames;++e)this._clip.addFrame(this.translatePose(this._frameData[e]),1e3/this._frameRate)};t.prototype.translatePose=function(e){var t;var a;var r;var n;var o;var d=new i;var c=new s;var p=e.components;var u=new l;var _=u.jointPoses;for(var y=0;y<this._numJoints;++y){o=0;a=new h;t=this._hierarchy[y];r=this._baseFrameData[y];n=t.flags;d.x=r.position.x;d.y=r.position.y;d.z=r.position.z;c.x=r.orientation.x;c.y=r.orientation.y;c.z=r.orientation.z;if(n&1)d.x=p[t.startIndex+o++];if(n&2)d.y=p[t.startIndex+o++];if(n&4)d.z=p[t.startIndex+o++];if(n&8)c.x=p[t.startIndex+o++];if(n&16)c.y=p[t.startIndex+o++];if(n&32)c.z=p[t.startIndex+o++];var f=1-c.x*c.x-c.y*c.y-c.z*c.z;c.w=f<0?0:-Math.sqrt(f);if(t.parentIndex<0){a.orientation.multiply(this._rotationQuat,c);a.translation=this._rotationQuat.rotatePoint(d)}else{a.orientation.copyFrom(c);a.translation.x=d.x;a.translation.y=d.y;a.translation.z=d.z}a.orientation.y=-a.orientation.y;a.orientation.z=-a.orientation.z;a.translation.x=-a.translation.x;_[y]=a}return u};t.prototype.parseHierarchy=function(){var e;var a;var r=this.getNextToken();var s=0;if(r!="{")this.sendUnknownKeywordError();do{if(this._reachedEOF)this.sendEOFError();a=new y;a.name=this.parseLiteralstring();a.parentIndex=this.getNextInt();a.flags=this.getNextInt();a.startIndex=this.getNextInt();this._hierarchy[s++]=a;e=this.getNextChar();if(e=="/"){this.putBack();e=this.getNextToken();if(e==t.COMMENT_TOKEN)this.ignoreLine();e=this.getNextChar()}if(e!="}")this.putBack()}while(e!="}")};t.prototype.parseBounds=function(){var e;var a;var r=this.getNextToken();var s=0;if(r!="{")this.sendUnknownKeywordError();do{if(this._reachedEOF)this.sendEOFError();a=new u;a.min=this.parseVector3D();a.max=this.parseVector3D();this._bounds[s++]=a;e=this.getNextChar();if(e=="/"){this.putBack();e=this.getNextToken();if(e==t.COMMENT_TOKEN)this.ignoreLine();e=this.getNextChar()}if(e!="}")this.putBack()}while(e!="}")};t.prototype.parseBaseFrame=function(){var e;var a;var r=this.getNextToken();var s=0;if(r!="{")this.sendUnknownKeywordError();do{if(this._reachedEOF)this.sendEOFError();a=new p;a.position=this.parseVector3D();a.orientation=this.parseQuaternion();this._baseFrameData[s++]=a;e=this.getNextChar();if(e=="/"){this.putBack();e=this.getNextToken();if(e==t.COMMENT_TOKEN)this.ignoreLine();e=this.getNextChar()}if(e!="}")this.putBack()}while(e!="}")};t.prototype.parseFrame=function(){var e;var a;var r;var s;s=this.getNextInt();r=this.getNextToken();if(r!="{")this.sendUnknownKeywordError();do{if(this._reachedEOF)this.sendEOFError();a=new _;a.components=new Array(this._numAnimatedComponents);for(var i=0;i<this._numAnimatedComponents;++i)a.components[i]=this.getNextNumber();this._frameData[s]=a;e=this.getNextChar();if(e=="/"){this.putBack();e=this.getNextToken();if(e==t.COMMENT_TOKEN)this.ignoreLine();e=this.getNextChar()}if(e!="}")this.putBack()}while(e!="}")};t.prototype.putBack=function(){this._parseIndex--;this._charLineIndex--;this._reachedEOF=this._parseIndex>=this._textData.length};t.prototype.getNextToken=function(){var e;var a="";while(!this._reachedEOF){e=this.getNextChar();if(e==" "||e=="\r"||e=="\n"||e=="	"){if(a!=t.COMMENT_TOKEN)this.skipWhiteSpace();if(a!="")return a}else a+=e;if(a==t.COMMENT_TOKEN)return a}return a};t.prototype.skipWhiteSpace=function(){var e;do e=this.getNextChar();while(e=="\n"||e==" "||e=="\r"||e=="	");this.putBack()};t.prototype.ignoreLine=function(){var e;while(!this._reachedEOF&&e!="\n")e=this.getNextChar()};t.prototype.getNextChar=function(){var e=this._textData.charAt(this._parseIndex++);if(e=="\n"){++this._line;this._charLineIndex=0}else if(e!="\r")++this._charLineIndex;if(this._parseIndex==this._textData.length)this._reachedEOF=true;return e};t.prototype.getNextInt=function(){var e=parseInt(this.getNextToken());if(isNaN(e))this.sendParseError("int type");return e};t.prototype.getNextNumber=function(){var e=parseFloat(this.getNextToken());if(isNaN(e))this.sendParseError("float type");return e};t.prototype.parseVector3D=function(){var e=new i;var t=this.getNextToken();if(t!="(")this.sendParseError("(");e.x=this.getNextNumber();e.y=this.getNextNumber();e.z=this.getNextNumber();if(this.getNextToken()!=")")this.sendParseError(")");return e};t.prototype.parseQuaternion=function(){var e=new s;var t=this.getNextToken();if(t!="(")this.sendParseError("(");e.x=this.getNextNumber();e.y=this.getNextNumber();e.z=this.getNextNumber();var a=1-e.x*e.x-e.y*e.y-e.z*e.z;e.w=a<0?0:-Math.sqrt(a);if(this.getNextToken()!=")")this.sendParseError(")");return e};t.prototype.parseCMD=function(){this.parseLiteralstring()};t.prototype.parseLiteralstring=function(){this.skipWhiteSpace();var e=this.getNextChar();var t="";if(e!='"')this.sendParseError('"');do{if(this._reachedEOF)this.sendEOFError();e=this.getNextChar();if(e!='"')t+=e}while(e!='"');return t};t.prototype.sendEOFError=function(){throw new Error("Unexpected end of file")};t.prototype.sendParseError=function(e){throw new Error("Unexpected token at line "+(this._line+1)+", character "+this._charLineIndex+". "+e+" expected, but "+this._textData.charAt(this._parseIndex-1)+" encountered")};t.prototype.sendUnknownKeywordError=function(){throw new Error("Unknown keyword at line "+(this._line+1)+", character "+this._charLineIndex+". ")};t.VERSION_TOKEN="MD5Version";t.COMMAND_LINE_TOKEN="commandline";t.NUM_FRAMES_TOKEN="numFrames";t.NUM_JOINTS_TOKEN="numJoints";t.FRAME_RATE_TOKEN="frameRate";t.NUM_ANIMATED_COMPONENTS_TOKEN="numAnimatedComponents";t.HIERARCHY_TOKEN="hierarchy";t.BOUNDS_TOKEN="bounds";t.BASE_FRAME_TOKEN="baseframe";t.FRAME_TOKEN="frame";t.COMMENT_TOKEN="//";return t}(o);var p=function(){function e(){}return e}();var u=function(){function e(){}return e}();var _=function(){function e(){}return e}();var y=function(){function e(){}return e}();t.exports=c},{"awayjs-core/lib/geom/Quaternion":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-renderergl/lib/animators/data/JointPose":undefined,"awayjs-renderergl/lib/animators/data/SkeletonPose":undefined,"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":undefined}],"awayjs-parsers/lib/MD5MeshParser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/data/Geometry");var i=e("awayjs-core/lib/data/TriangleSubGeometry");var n=e("awayjs-core/lib/geom/Quaternion");var o=e("awayjs-core/lib/geom/Vector3D");var h=e("awayjs-core/lib/net/URLLoaderDataFormat");var l=e("awayjs-core/lib/parsers/ParserBase");var d=e("awayjs-display/lib/containers/DisplayObjectContainer");var c=e("awayjs-display/lib/entities/Mesh");var p=e("awayjs-renderergl/lib/animators/SkeletonAnimationSet");var u=e("awayjs-renderergl/lib/animators/data/Skeleton");var _=e("awayjs-renderergl/lib/animators/data/SkeletonJoint");var y=function(e){r(t,e);function t(t,a){if(t===void 0){t=null}if(a===void 0){a=0}e.call(this,h.TEXT);this._parseIndex=0;this._line=0;this._charLineIndex=0;this._rotationQuat=new n;this._rotationQuat.fromAxisAngle(o.X_AXIS,-Math.PI*.5);if(t){var r=new n;r.fromAxisAngle(t,a);this._rotationQuat.multiply(this._rotationQuat,r)}}t.supportsType=function(e){e=e.toLowerCase();return e=="md5mesh"};t.supportsData=function(e){return false};t.prototype._pProceedParsing=function(){var e;if(!this._startedParsing){this._textData=this._pGetTextData();this._startedParsing=true}while(this._pHasTime()){e=this.getNextToken();switch(e){case t.COMMENT_TOKEN:this.ignoreLine();break;case t.VERSION_TOKEN:this._version=this.getNextInt();if(this._version!=10)throw new Error("Unknown version number encountered!");break;case t.COMMAND_LINE_TOKEN:this.parseCMD();break;case t.NUM_JOINTS_TOKEN:this._numJoints=this.getNextInt();this._bindPoses=new Array(this._numJoints);break;case t.NUM_MESHES_TOKEN:this._numMeshes=this.getNextInt();break;case t.JOINTS_TOKEN:this.parseJoints();break;case t.MESH_TOKEN:this.parseMesh();break;default:if(!this._reachedEOF)this.sendUnknownKeywordError()}if(this._reachedEOF){this.calculateMaxJointCount();this._animationSet=new p(this._maxJointCount);this._mesh=new c(new s,null);this._geometry=this._mesh.geometry;for(var a=0;a<this._meshData.length;++a)this._geometry.addSubGeometry(this.translateGeom(this._meshData[a].vertexData,this._meshData[a].weightData,this._meshData[a].indices));this._pContent.addChild(this._mesh);this._pFinalizeAsset(this._geometry);this._pFinalizeAsset(this._mesh);this._pFinalizeAsset(this._skeleton);this._pFinalizeAsset(this._animationSet);return l.PARSING_DONE}}return l.MORE_TO_PARSE};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new d};t.prototype.calculateMaxJointCount=function(){this._maxJointCount=0;var e=this._meshData.length;for(var t=0;t<e;++t){var a=this._meshData[t];var r=a.vertexData;var s=r.length;for(var i=0;i<s;++i){var n=this.countZeroWeightJoints(r[i],a.weightData);var o=r[i].countWeight-n;if(o>this._maxJointCount)this._maxJointCount=o}}};t.prototype.countZeroWeightJoints=function(e,t){var a=e.startWeight;var r=e.startWeight+e.countWeight;var s=0;var i;for(var n=a;n<r;++n){i=t[n].bias;if(i==0)++s}return s};t.prototype.parseJoints=function(){var e;var a;var r;var s;var i=0;var n=this.getNextToken();if(n!="{")this.sendUnknownKeywordError();this._skeleton=new u;do{if(this._reachedEOF)this.sendEOFError();a=new _;a.name=this.parseLiteralstring();a.parentIndex=this.getNextInt();r=this.parseVector3D();r=this._rotationQuat.rotatePoint(r);s=this.parseQuaternion();this._bindPoses[i]=s.toMatrix3D();this._bindPoses[i].appendTranslation(r.x,r.y,r.z);var o=this._bindPoses[i].clone();o.invert();a.inverseBindPose=o.rawData;this._skeleton.joints[i++]=a;e=this.getNextChar();if(e=="/"){this.putBack();e=this.getNextToken();if(e==t.COMMENT_TOKEN)this.ignoreLine();e=this.getNextChar()}if(e!="}")this.putBack()}while(e!="}")};t.prototype.putBack=function(){this._parseIndex--;this._charLineIndex--;this._reachedEOF=this._parseIndex>=this._textData.length};t.prototype.parseMesh=function(){var e=this.getNextToken();var a;var r;var s;var i;if(e!="{")this.sendUnknownKeywordError();if(this._shaders==null)this._shaders=new Array;while(a!="}"){a=this.getNextToken();switch(a){case t.COMMENT_TOKEN:this.ignoreLine();break;case t.MESH_SHADER_TOKEN:this._shaders.push(this.parseLiteralstring());break;case t.MESH_NUM_VERTS_TOKEN:r=new Array(this.getNextInt());break;case t.MESH_NUM_TRIS_TOKEN:i=new Array(this.getNextInt()*3);break;case t.MESH_NUM_WEIGHTS_TOKEN:s=new Array(this.getNextInt());break;case t.MESH_VERT_TOKEN:this.parseVertex(r);break;case t.MESH_TRI_TOKEN:this.parseTri(i);break;case t.MESH_WEIGHT_TOKEN:this.parseJoint(s);break}}if(this._meshData==null)this._meshData=new Array;var n=this._meshData.length;this._meshData[n]=new b;this._meshData[n].vertexData=r;this._meshData[n].weightData=s;this._meshData[n].indices=i};t.prototype.translateGeom=function(e,t,a){var r=e.length;var s,n,o;var h;var l;var d;var c;var p=new i(true);var u=new Array(r*2);var _=new Array(r*3);var y=new Array(r*this._maxJointCount);var f=new Array(r*this._maxJointCount);var m=0;var b;for(var v=0;v<r;++v){h=e[v];s=h.index*3;n=s+1;o=s+2;_[s]=_[n]=_[o]=0;b=0;for(var g=0;g<h.countWeight;++g){l=t[h.startWeight+g];if(l.bias>0){d=this._bindPoses[l.joint];c=d.transformVector(l.pos);_[s]+=c.x*l.bias;_[n]+=c.y*l.bias;_[o]+=c.z*l.bias;y[m]=l.joint*3;f[m++]=l.bias;++b}}for(g=b;g<this._maxJointCount;++g){y[m]=0;f[m++]=0}s=h.index<<1;u[s++]=h.s;u[s]=h.t}p.jointsPerVertex=this._maxJointCount;p.updateIndices(a);p.updatePositions(_);p.updateUVs(u);p.updateJointIndices(y);p.updateJointWeights(f);p.vertexNormals;p.vertexTangents;p.autoDeriveTangents=false;p.autoDeriveNormals=false;return p};t.prototype.parseTri=function(e){var t=this.getNextInt()*3;e[t]=this.getNextInt();e[t+1]=this.getNextInt();e[t+2]=this.getNextInt()};t.prototype.parseJoint=function(e){var t=new m;t.index=this.getNextInt();t.joint=this.getNextInt();t.bias=this.getNextNumber();t.pos=this.parseVector3D();e[t.index]=t};t.prototype.parseVertex=function(e){var t=new f;t.index=this.getNextInt();this.parseUV(t);t.startWeight=this.getNextInt();t.countWeight=this.getNextInt();e[t.index]=t};t.prototype.parseUV=function(e){var t=this.getNextToken();if(t!="(")this.sendParseError("(");e.s=this.getNextNumber();e.t=this.getNextNumber();if(this.getNextToken()!=")")this.sendParseError(")")};t.prototype.getNextToken=function(){var e;var a="";while(!this._reachedEOF){e=this.getNextChar();if(e==" "||e=="\r"||e=="\n"||e=="	"){if(a!=t.COMMENT_TOKEN)this.skipWhiteSpace();if(a!="")return a}else a+=e;if(a==t.COMMENT_TOKEN)return a}return a};t.prototype.skipWhiteSpace=function(){var e;do e=this.getNextChar();while(e=="\n"||e==" "||e=="\r"||e=="	");this.putBack()};t.prototype.ignoreLine=function(){var e;while(!this._reachedEOF&&e!="\n")e=this.getNextChar()};t.prototype.getNextChar=function(){var e=this._textData.charAt(this._parseIndex++);if(e=="\n"){++this._line;this._charLineIndex=0}else if(e!="\r")++this._charLineIndex;if(this._parseIndex>=this._textData.length)this._reachedEOF=true;return e};t.prototype.getNextInt=function(){var e=parseInt(this.getNextToken());if(isNaN(e))this.sendParseError("int type");return e};t.prototype.getNextNumber=function(){var e=parseFloat(this.getNextToken());if(isNaN(e))this.sendParseError("float type");return e};t.prototype.parseVector3D=function(){var e=new o;var t=this.getNextToken();if(t!="(")this.sendParseError("(");e.x=-this.getNextNumber();e.y=this.getNextNumber();e.z=this.getNextNumber();if(this.getNextToken()!=")")this.sendParseError(")");return e};t.prototype.parseQuaternion=function(){var e=new n;var t=this.getNextToken();if(t!="(")this.sendParseError("(");e.x=this.getNextNumber();e.y=-this.getNextNumber();e.z=-this.getNextNumber();var a=1-e.x*e.x-e.y*e.y-e.z*e.z;e.w=a<0?0:-Math.sqrt(a);if(this.getNextToken()!=")")this.sendParseError(")");var r=new n;r.multiply(this._rotationQuat,e);return r};t.prototype.parseCMD=function(){this.parseLiteralstring()};t.prototype.parseLiteralstring=function(){this.skipWhiteSpace();var e=this.getNextChar();var t="";if(e!='"')this.sendParseError('"');do{if(this._reachedEOF)this.sendEOFError();e=this.getNextChar();if(e!='"')t+=e}while(e!='"');return t};t.prototype.sendEOFError=function(){throw new Error("Unexpected end of file")};t.prototype.sendParseError=function(e){throw new Error("Unexpected token at line "+(this._line+1)+", character "+this._charLineIndex+". "+e+" expected, but "+this._textData.charAt(this._parseIndex-1)+" encountered")};t.prototype.sendUnknownKeywordError=function(){throw new Error("Unknown keyword at line "+(this._line+1)+", character "+this._charLineIndex+". ")};t.VERSION_TOKEN="MD5Version";t.COMMAND_LINE_TOKEN="commandline";t.NUM_JOINTS_TOKEN="numJoints";t.NUM_MESHES_TOKEN="numMeshes";t.COMMENT_TOKEN="//";t.JOINTS_TOKEN="joints";t.MESH_TOKEN="mesh";t.MESH_SHADER_TOKEN="shader";t.MESH_NUM_VERTS_TOKEN="numverts";t.MESH_VERT_TOKEN="vert";t.MESH_NUM_TRIS_TOKEN="numtris";t.MESH_TRI_TOKEN="tri";t.MESH_NUM_WEIGHTS_TOKEN="numweights";t.MESH_WEIGHT_TOKEN="weight";return t}(l);var f=function(){function e(){}return e}();var m=function(){function e(){}return e}();var b=function(){function e(){}return e}();t.exports=y},{"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/data/TriangleSubGeometry":undefined,"awayjs-core/lib/geom/Quaternion":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-renderergl/lib/animators/SkeletonAnimationSet":undefined,"awayjs-renderergl/lib/animators/data/Skeleton":undefined,"awayjs-renderergl/lib/animators/data/SkeletonJoint":undefined}],"awayjs-parsers/lib/Max3DSParser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e;

}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/data/Geometry");var i=e("awayjs-core/lib/data/TriangleSubGeometry");var n=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Vector3D");var h=e("awayjs-core/lib/net/URLLoaderDataFormat");var l=e("awayjs-core/lib/net/URLRequest");var d=e("awayjs-core/lib/parsers/ParserBase");var c=e("awayjs-core/lib/parsers/ParserUtils");var p=e("awayjs-core/lib/textures/TextureBase");var u=e("awayjs-display/lib/containers/DisplayObjectContainer");var _=e("awayjs-display/lib/entities/Mesh");var y=e("awayjs-display/lib/managers/DefaultMaterialManager");var f=e("awayjs-methodmaterials/lib/MethodMaterial");var m=e("awayjs-methodmaterials/lib/MethodMaterialMode");var b=function(e){r(t,e);function t(t){if(t===void 0){t=true}e.call(this,h.ARRAY_BUFFER);this._useSmoothingGroups=t}t.supportsType=function(e){e=e.toLowerCase();return e=="3ds"};t.supportsData=function(e){var t;t=c.toByteArray(e);if(t){t.position=0;if(t.readShort()==19789)return true}return false};t.prototype._iResolveDependency=function(e){if(e.assets.length==1){var t;t=e.assets[0];if(t.isAsset(p)){var a;a=this._textures[e.id];a.texture=t}}};t.prototype._iResolveDependencyFailure=function(e){};t.prototype._pProceedParsing=function(){if(!this._byteData){this._byteData=this._pGetByteData();this._byteData.position=0;this._textures={};this._materials={};this._unfinalized_objects={}}while(this._pHasTime()){if(this._cur_mat&&this._byteData.position>=this._cur_mat_end)this.finalizeCurrentMaterial();else if(this._cur_obj&&this._byteData.position>=this._cur_obj_end){this._unfinalized_objects[this._cur_obj.name]=this._cur_obj;this._cur_obj_end=Number.MAX_VALUE;this._cur_obj=null}if(this._byteData.getBytesAvailable()>0){var e;var t;var a;e=this._byteData.readUnsignedShort();t=this._byteData.readUnsignedInt();a=this._byteData.position+(t-6);switch(e){case 19789:case 15677:case 45056:continue;break;case 45055:this._cur_mat_end=a;this._cur_mat=this.parseMaterial();break;case 16384:this._cur_obj_end=a;this._cur_obj=new w;this._cur_obj.name=this.readNulTermstring();this._cur_obj.materials=new Array;this._cur_obj.materialFaces={};break;case 16640:this._cur_obj.type=_.assetType;break;case 16656:this.parseVertexList();break;case 16672:this.parseFaceList();break;case 16704:this.parseUVList();break;case 16688:this.parseFaceMaterialList();break;case 16736:this._cur_obj.transform=this.readTransform();break;case 45058:this.parseObjectAnimation(a);break;case 16720:this.parseSmoothingGroups();break;default:this._byteData.position+=t-6;break}if(this.dependencies.length){this._pPauseAndRetrieveDependencies();break}}}if(this._byteData.getBytesAvailable()||this._cur_obj||this._cur_mat){return d.MORE_TO_PARSE}else{var r;for(r in this._unfinalized_objects){var s;s=this.constructObject(this._unfinalized_objects[r]);if(s){this._pContent.addChild(s);this._pFinalizeAsset(s,r)}}return d.PARSING_DONE}};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new u};t.prototype.parseMaterial=function(){var e;e=new g;while(this._byteData.position<this._cur_mat_end){var t;var a;var r;t=this._byteData.readUnsignedShort();a=this._byteData.readUnsignedInt();r=this._byteData.position+(a-6);switch(t){case 40960:e.name=this.readNulTermstring();break;case 40976:e.ambientColor=this.readColor();break;case 40992:e.diffuseColor=this.readColor();break;case 41008:e.specularColor=this.readColor();break;case 41089:e.twoSided=true;break;case 41472:e.colorMap=this.parseTexture(r);break;case 41476:e.specularMap=this.parseTexture(r);break;default:this._byteData.position=r;break}}return e};t.prototype.parseTexture=function(e){var t;t=new k;while(this._byteData.position<e){var a;var r;a=this._byteData.readUnsignedShort();r=this._byteData.readUnsignedInt();switch(a){case 41728:t.url=this.readNulTermstring();break;default:this._byteData.position+=r-6;break}}this._textures[t.url]=t;this._pAddDependency(t.url,new l(t.url));return t};t.prototype.parseVertexList=function(){var e;var t;var a;a=this._byteData.readUnsignedShort();this._cur_obj.verts=new Array(a*3);e=0;t=this._cur_obj.verts.length;while(e<t){var r,s,i;r=this._byteData.readFloat();s=this._byteData.readFloat();i=this._byteData.readFloat();this._cur_obj.verts[e++]=r;this._cur_obj.verts[e++]=i;this._cur_obj.verts[e++]=s}};t.prototype.parseFaceList=function(){var e;var t;var a;a=this._byteData.readUnsignedShort();this._cur_obj.indices=new Array(a*3);e=0;t=this._cur_obj.indices.length;while(e<t){var r,s,i;r=this._byteData.readUnsignedShort();s=this._byteData.readUnsignedShort();i=this._byteData.readUnsignedShort();this._cur_obj.indices[e++]=r;this._cur_obj.indices[e++]=i;this._cur_obj.indices[e++]=s;this._byteData.position+=2}this._cur_obj.smoothingGroups=new Array(a)};t.prototype.parseSmoothingGroups=function(){var e=this._cur_obj.indices.length/3;var t=0;while(t<e){this._cur_obj.smoothingGroups[t]=this._byteData.readUnsignedInt();t++}};t.prototype.parseUVList=function(){var e;var t;var a;a=this._byteData.readUnsignedShort();this._cur_obj.uvs=new Array(a*2);e=0;t=this._cur_obj.uvs.length;while(e<t){this._cur_obj.uvs[e++]=this._byteData.readFloat();this._cur_obj.uvs[e++]=1-this._byteData.readFloat()}};t.prototype.parseFaceMaterialList=function(){var e;var t;var a;var r;e=this.readNulTermstring();t=this._byteData.readUnsignedShort();r=new Array(t);a=0;while(a<r.length)r[a++]=this._byteData.readUnsignedShort();this._cur_obj.materials.push(e);this._cur_obj.materialFaces[e]=r};t.prototype.parseObjectAnimation=function(e){var t;var a;var r;var s;var i;r=new o;while(this._byteData.position<e){var n;var h;n=this._byteData.readUnsignedShort();h=this._byteData.readUnsignedInt();switch(n){case 45072:s=this.readNulTermstring();this._byteData.position+=4;i=this._byteData.readShort();break;case 45075:r.x=this._byteData.readFloat();r.z=this._byteData.readFloat();r.y=this._byteData.readFloat();break;default:this._byteData.position+=h-6;break}}if(s!="$$$DUMMY"&&this._unfinalized_objects.hasOwnProperty(s)){t=this._unfinalized_objects[s];a=this.constructObject(t,r);if(a){this._pContent.addChild(a);this._pFinalizeAsset(a,t.name)}delete this._unfinalized_objects[s]}};t.prototype.constructObject=function(e,t){if(t===void 0){t=null}if(e.type==_.assetType){var a;var r;var o;var h;var l;var d;var c;var p;if(e.materials.length>1)console.log("The Away3D 3DS parser does not support multiple materials per mesh at this point.");if(!e.indices||e.indices.length==0)return null;c=new Array(e.verts.length/3);p=new Array(e.indices.length/3);this.prepareData(c,p,e);if(this._useSmoothingGroups)this.applySmoothGroups(c,p);e.verts=new Array(c.length*3);for(a=0;a<c.length;a++){e.verts[a*3]=c[a].x;e.verts[a*3+1]=c[a].y;e.verts[a*3+2]=c[a].z}e.indices=new Array(p.length*3);for(a=0;a<p.length;a++){e.indices[a*3]=p[a].a;e.indices[a*3+1]=p[a].b;e.indices[a*3+2]=p[a].c}if(e.uvs){e.uvs=new Array(c.length*2);for(a=0;a<c.length;a++){e.uvs[a*2]=c[a].u;e.uvs[a*2+1]=c[a].v}}o=new s;r=new i(true);r.updateIndices(e.indices);r.updatePositions(e.verts);r.updateUVs(e.uvs);o.addSubGeometry(r);if(e.materials.length>0){var u;u=e.materials[0];h=this._materials[u].material}if(t){if(e.transform){var y=e.transform.concat();y[12]=0;y[13]=0;y[14]=0;d=new n(y);t=d.transformVector(t)}t.scaleBy(-1);d=new n;d.appendTranslation(t.x,t.y,t.z);o.applyTransformation(d)}if(e.transform){d=new n(e.transform);d.invert();o.applyTransformation(d)}this._pFinalizeAsset(o,e.name.concat("_geom"));l=new _(o,h);l.transform.matrix3D=new n(e.transform);return l}return null};t.prototype.prepareData=function(e,t,a){var r;var s;var i;var n=a.verts.length;for(r=0,s=0,i=0;r<n;){var o=new B;o.x=a.verts[r++];o.y=a.verts[r++];o.z=a.verts[r++];if(a.uvs){o.u=a.uvs[s++];o.v=a.uvs[s++]}e[i++]=o}n=a.indices.length;for(r=0,i=0;r<n;){var h=new v;h.a=a.indices[r++];h.b=a.indices[r++];h.c=a.indices[r++];h.smoothGroup=a.smoothingGroups[i]||0;t[i++]=h}};t.prototype.applySmoothGroups=function(e,t){var a;var r;var s;var i;var n;var o=e.length;var h=t.length;var l=new Array(o);for(a=0;a<o;a++)l[a]=new Array;for(a=0;a<h;a++){var d=t[a];for(r=0;r<3;r++){var c=l[r==0?d.a:r==1?d.b:d.c];var p=d.smoothGroup;for(s=c.length-1;s>=0;s--){if((p&c[s])>0){p|=c[s];c.splice(s,1);s=c.length-1}}c.push(p)}}var u=new Array(o);for(a=0;a<o;a++){if((n=l[a].length)<1)continue;var _=new Array(n);u[a]=_;_[0]=a;var y=e[a];for(r=1;r<n;r++){var f=new B;f.x=y.x;f.y=y.y;f.z=y.z;f.u=y.u;f.v=y.v;_[r]=e.length;e.push(f)}}o=e.length;for(a=0;a<h;a++){d=t[a];p=d.smoothGroup;for(r=0;r<3;r++){s=r==0?d.a:r==1?d.b:d.c;c=l[s];n=c.length;_=u[s];for(i=0;i<n;i++){if(p==0&&c[i]==0||(p&c[i])>0){var m=_[i];if(p==0){c.splice(i,1);_.splice(i,1)}if(r==0)d.a=m;else if(r==1)d.b=m;else d.c=m;i=n}}}}};t.prototype.finalizeCurrentMaterial=function(){var e;if(this._cur_mat.colorMap)e=new f(this._cur_mat.colorMap.texture||y.getDefaultTexture());else e=new f(this._cur_mat.ambientColor);e.diffuseColor=this._cur_mat.diffuseColor;e.specularColor=this._cur_mat.specularColor;if(this.materialMode>=2)e.mode=m.MULTI_PASS;e.bothSides=this._cur_mat.twoSided;this._pFinalizeAsset(e,this._cur_mat.name);this._materials[this._cur_mat.name]=this._cur_mat;this._cur_mat.material=e;this._cur_mat=null};t.prototype.readNulTermstring=function(){var e;var t="";while((e=this._byteData.readUnsignedByte())>0)t+=String.fromCharCode(e);return t};t.prototype.readTransform=function(){var e;e=new Array(16);e[0]=this._byteData.readFloat();e[2]=this._byteData.readFloat();e[1]=this._byteData.readFloat();e[3]=0;e[8]=this._byteData.readFloat();e[10]=this._byteData.readFloat();e[9]=this._byteData.readFloat();e[11]=0;e[4]=this._byteData.readFloat();e[6]=this._byteData.readFloat();e[5]=this._byteData.readFloat();e[7]=0;e[12]=this._byteData.readFloat();e[14]=this._byteData.readFloat();e[13]=this._byteData.readFloat();e[15]=1;return e};t.prototype.readColor=function(){var e;var t;var a,r,s;e=this._byteData.readUnsignedShort();t=this._byteData.readUnsignedInt();switch(e){case 16:a=this._byteData.readFloat()*255;r=this._byteData.readFloat()*255;s=this._byteData.readFloat()*255;break;case 17:a=this._byteData.readUnsignedByte();r=this._byteData.readUnsignedByte();s=this._byteData.readUnsignedByte();break;default:this._byteData.position+=t-6;break}return a<<16|r<<8|s};return t}(d);var v=function(){function e(){}return e}();var g=function(){function e(){}return e}();var w=function(){function e(){}return e}();var k=function(){function e(){}return e}();var B=function(){function e(){}return e}();t.exports=b},{"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/data/TriangleSubGeometry":undefined,"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-core/lib/textures/TextureBase":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/managers/DefaultMaterialManager":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/MethodMaterialMode":undefined}],"awayjs-parsers/lib/OBJParser":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/data/TriangleSubGeometry");var i=e("awayjs-core/lib/data/Geometry");var n=e("awayjs-core/lib/net/URLLoaderDataFormat");var o=e("awayjs-core/lib/net/URLRequest");var h=e("awayjs-core/lib/parsers/ParserBase");var l=e("awayjs-core/lib/parsers/ParserUtils");var d=e("awayjs-core/lib/textures/TextureBase");var c=e("awayjs-display/lib/containers/DisplayObjectContainer");var p=e("awayjs-display/lib/entities/Mesh");var u=e("awayjs-display/lib/managers/DefaultMaterialManager");var _=e("awayjs-methodmaterials/lib/MethodMaterial");var y=e("awayjs-methodmaterials/lib/MethodMaterialMode");var f=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var m=function(e){r(t,e);function t(t){if(t===void 0){t=1}e.call(this,n.TEXT);this._mtlLibLoaded=true;this._activeMaterialID="";this._scale=t}Object.defineProperty(t.prototype,"scale",{set:function(e){this._scale=e},enumerable:true,configurable:true});t.supportsType=function(e){e=e.toLowerCase();return e=="obj"};t.supportsData=function(e){var t=l.toString(e);var a=false;var r=false;if(t){a=t.indexOf("\nv ")!=-1;r=t.indexOf("\nf ")!=-1}return a&&r};t.prototype._iResolveDependency=function(e){if(e.id=="mtl"){var t=l.toString(e.data);this.parseMtl(t)}else{var a;if(e.assets.length!=1){return}a=e.assets[0];if(a.isAsset(d)){var r=new k;r.materialID=e.id;r.texture=a;this._materialLoaded.push(r);if(this._meshes.length>0){this.applyMaterial(r)}}}};t.prototype._iResolveDependencyFailure=function(e){if(e.id=="mtl"){this._mtlLib=false;this._mtlLibLoaded=false}else{var t=new k;t.materialID=e.id;this._materialLoaded.push(t)}if(this._meshes.length>0)this.applyMaterial(t)};t.prototype._pProceedParsing=function(){var e;var t=String.fromCharCode(10);var a;if(!this._startedParsing){this._textData=this._pGetTextData();this._textData=this._textData.replace(/\\[\r\n]+\s*/gm," ")}if(this._textData.indexOf(t)==-1)t=String.fromCharCode(13);if(!this._startedParsing){this._startedParsing=true;this._vertices=new Array;this._vertexNormals=new Array;this._materialIDs=new Array;this._materialLoaded=new Array;this._meshes=new Array;this._uvs=new Array;this._stringLength=this._textData.length;this._charIndex=this._textData.indexOf(t,0);this._oldIndex=0;this._objects=new Array;this._objectIndex=0}while(this._charIndex<this._stringLength&&this._pHasTime()){this._charIndex=this._textData.indexOf(t,this._oldIndex);if(this._charIndex==-1)this._charIndex=this._stringLength;e=this._textData.substring(this._oldIndex,this._charIndex);e=e.split("\r").join("");e=e.replace("  "," ");a=e.split(" ");this._oldIndex=this._charIndex+1;this.parseLine(a);if(this.parsingPaused){return h.MORE_TO_PARSE}}if(this._charIndex>=this._stringLength){if(this._mtlLib&&!this._mtlLibLoaded){return h.MORE_TO_PARSE}this.translate();this.applyMaterials();return h.PARSING_DONE}return h.MORE_TO_PARSE};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new c};t.prototype.parseLine=function(e){switch(e[0]){case"mtllib":this._mtlLib=true;this._mtlLibLoaded=false;this.loadMtl(e[1]);break;case"g":this.createGroup(e);break;case"o":this.createObject(e);break;case"usemtl":if(this._mtlLib){if(!e[1])e[1]="def000";this._materialIDs.push(e[1]);this._activeMaterialID=e[1];if(this._currentGroup)this._currentGroup.materialID=this._activeMaterialID}break;case"v":this.parseVertex(e);break;case"vt":this.parseUV(e);break;case"vn":this.parseVertexNormal(e);break;case"f":this.parseFace(e)}};t.prototype.translate=function(){for(var e=0;e<this._objects.length;++e){var t=this._objects[e].groups;var a=t.length;var r;var s;var n;var o;var h;var l;var d;for(var c=0;c<a;++c){n=new i;r=t[c].materialGroups;s=r.length;for(h=0;h<s;++h)this.translateMaterialGroup(r[h],n);if(n.subGeometries.length==0)continue;this._pFinalizeAsset(n);d=new _(u.getDefaultTexture());if(this.materialMode>=2)d.mode=y.MULTI_PASS;o=new p(n,d);if(this._objects[e].name){o.name=this._objects[e].name}else if(t[c].name){o.name=t[c].name}else{o.name=""}this._meshes.push(o);if(t[c].materialID!="")d.name=t[c].materialID+"~"+o.name;else d.name=this._lastMtlID+"~"+o.name;if(o.subMeshes.length>1){for(l=1;l<o.subMeshes.length;++l)o.subMeshes[l].material=d}this._pContent.addChild(o);this._pFinalizeAsset(o)}}};t.prototype.translateMaterialGroup=function(e,t){var a=e.faces;var r;var i=a.length;var n;var o;var h=new Array;var l=new Array;var d=new Array;var c=new Array;this._realIndices=[];this._vertexIndex=0;var p;for(var u=0;u<i;++u){r=a[u];n=r.indexIds.length-1;for(p=1;p<n;++p){this.translateVertexData(r,p,h,l,c,d);this.translateVertexData(r,0,h,l,c,d);this.translateVertexData(r,p+1,h,l,c,d)}}if(h.length>0){o=new s(true);o.autoDeriveNormals=d.length?false:true;o.updateIndices(c);o.updatePositions(h);o.updateVertexNormals(d);o.updateUVs(l);t.addSubGeometry(o)}};t.prototype.translateVertexData=function(e,t,a,r,s,i){var n;var o;var h;var l;if(!this._realIndices[e.indexIds[t]]){n=this._vertexIndex;this._realIndices[e.indexIds[t]]=++this._vertexIndex;o=this._vertices[e.vertexIndices[t]-1];a.push(o.x*this._scale,o.y*this._scale,o.z*this._scale);if(e.normalIndices.length>0){h=this._vertexNormals[e.normalIndices[t]-1];i.push(h.x,h.y,h.z)}if(e.uvIndices.length>0){try{l=this._uvs[e.uvIndices[t]-1];r.push(l.u,l.v)}catch(d){switch(t){case 0:r.push(0,1);break;case 1:r.push(.5,0);break;case 2:r.push(1,1)}}}}else{n=this._realIndices[e.indexIds[t]]-1}s.push(n)};t.prototype.createObject=function(e){this._currentGroup=null;this._currentMaterialGroup=null;this._objects.push(this._currentObject=new b);if(e)this._currentObject.name=e[1]};t.prototype.createGroup=function(e){if(!this._currentObject)this.createObject(null);this._currentGroup=new v;this._currentGroup.materialID=this._activeMaterialID;if(e)this._currentGroup.name=e[1];this._currentObject.groups.push(this._currentGroup);this.createMaterialGroup(null)};t.prototype.createMaterialGroup=function(e){this._currentMaterialGroup=new g;if(e)this._currentMaterialGroup.url=e[1];this._currentGroup.materialGroups.push(this._currentMaterialGroup)};t.prototype.parseVertex=function(e){var t,a,r;if(e.length>4){var s=[];var i;for(var n=1;n<e.length;++n){i=parseFloat(e[n]);if(!isNaN(i))s.push(i)}t=s[0];a=s[1];r=-s[2];this._vertices.push(new N(t,a,r))}else{t=parseFloat(e[1]);a=parseFloat(e[2]);r=-parseFloat(e[3]);this._vertices.push(new N(t,a,r))}};t.prototype.parseUV=function(e){if(e.length>3){var t=[];var a;for(var r=1;r<e.length;++r){a=parseFloat(e[r]);if(!isNaN(a))t.push(a)}this._uvs.push(new M(t[0],1-t[1]))}else{this._uvs.push(new M(parseFloat(e[1]),1-parseFloat(e[2])))}};t.prototype.parseVertexNormal=function(e){if(e.length>4){var t=[];var a;for(var r=1;r<e.length;++r){a=parseFloat(e[r]);if(!isNaN(a))t.push(a)}this._vertexNormals.push(new N(t[0],t[1],-t[2]))}else{this._vertexNormals.push(new N(parseFloat(e[1]),parseFloat(e[2]),-parseFloat(e[3])))}};t.prototype.parseFace=function(e){var t=e.length;var a=new B;if(!this._currentGroup){this.createGroup(null)}var r;for(var s=1;s<t;++s){if(e[s]==""){continue}r=e[s].split("/");a.vertexIndices.push(this.parseIndex(parseInt(r[0]),this._vertices.length));if(r[1]&&String(r[1]).length>0)a.uvIndices.push(this.parseIndex(parseInt(r[1]),this._uvs.length));if(r[2]&&String(r[2]).length>0)a.normalIndices.push(this.parseIndex(parseInt(r[2]),this._vertexNormals.length));a.indexIds.push(e[s])}this._currentMaterialGroup.faces.push(a)};t.prototype.parseIndex=function(e,t){if(e<0)return e+t+1;else return e};t.prototype.parseMtl=function(e){var t=e.split("newmtl");var a;var r;var s;var i;var n;var h;var l;var d;var c;var p;var u;var m;for(var b=0;b<t.length;++b){a=t[b].split("\r").join("").split("\n");if(a.length==1)a=t[b].split(String.fromCharCode(13));l=d=c=16777215;p=0;n=false;h=false;u=1;m="";for(s=0;s<a.length;++s){a[s]=a[s].replace(/\s+$/,"");if(a[s].substring(0,1)!="#"&&(s==0||a[s]!="")){r=a[s].split(" ");if(String(r[0]).charCodeAt(0)==9||String(r[0]).charCodeAt(0)==32)r[0]=r[0].substring(1,r[0].length);if(s==0){this._lastMtlID=r.join("");this._lastMtlID=this._lastMtlID==""?"def000":this._lastMtlID}else{switch(r[0]){case"Ka":if(r[1]&&!isNaN(Number(r[1]))&&r[2]&&!isNaN(Number(r[2]))&&r[3]&&!isNaN(Number(r[3])))d=r[1]*255<<16|r[2]*255<<8|r[3]*255;break;case"Ks":if(r[1]&&!isNaN(Number(r[1]))&&r[2]&&!isNaN(Number(r[2]))&&r[3]&&!isNaN(Number(r[3]))){c=r[1]*255<<16|r[2]*255<<8|r[3]*255;n=true}break;case"Ns":if(r[1]&&!isNaN(Number(r[1])))p=Number(r[1])*.001;if(p==0)n=false;break;case"Kd":if(r[1]&&!isNaN(Number(r[1]))&&r[2]&&!isNaN(Number(r[2]))&&r[3]&&!isNaN(Number(r[3]))){l=r[1]*255<<16|r[2]*255<<8|r[3]*255;h=true}break;case"tr":case"d":if(r[1]&&!isNaN(Number(r[1])))u=Number(r[1]);break;case"map_Kd":m=this.parseMapKdString(r);m=m.replace(/\\/g,"/")}}}}if(m!=""){if(n){i=new f;i.specularColor=c;i.specular=p;var v=new w;v.alpha=u;v.basicSpecularMethod=i;v.materialID=this._lastMtlID;if(!this._materialSpecularData)this._materialSpecularData=new Array;this._materialSpecularData.push(v)}this._pAddDependency(this._lastMtlID,new o(m))}else if(h&&!isNaN(d)){var g=new k;g.materialID=this._lastMtlID;if(u==0)console.log("Warning: an alpha value of 0 was found in mtl color tag (Tr or d) ref:"+this._lastMtlID+", mesh(es) using it will be invisible!");var B;if(this.materialMode<2){B=new _(d);var M=B;M.alpha=u;M.diffuseColor=l;M.repeat=true;if(n){M.specularColor=c;M.specular=p}}else{B=new _(d);B.mode=y.MULTI_PASS;var N=B;N.diffuseColor=l;N.repeat=true;if(n){N.specularColor=c;N.specular=p}}g.cm=B;this._materialLoaded.push(g);if(this._meshes.length>0)this.applyMaterial(g)}}this._mtlLibLoaded=true};t.prototype.parseMapKdString=function(e){var t="";var a;var r;for(a=1;a<e.length;){switch(e[a]){case"-blendu":case"-blendv":case"-cc":case"-clamp":case"-texres":a+=2;break;case"-mm":a+=3;break;case"-o":case"-s":case"-t":a+=4;continue;default:r=true;break}if(r)break}for(a;a<e.length;a++){t+=e[a];t+=" "}t=t.replace(/\s+$/,"");return t};t.prototype.loadMtl=function(e){this._pAddDependency("mtl",new o(e),true);this._pPauseAndRetrieveDependencies()};t.prototype.applyMaterial=function(e){var t;var a;var r;var s;var i;for(var n=0;n<this._meshes.length;++n){a=this._meshes[n];t=a.material.name.split("~");if(t[0]==e.materialID){if(e.cm){if(a.material)a.material=null;a.material=e.cm}else if(e.texture){if(this.materialMode<2){r=a.material;r.texture=e.texture;r.color=e.color;r.alpha=e.alpha;r.repeat=true;if(e.specularMethod){r.specularMethod=null;r.specularMethod=e.specularMethod}else if(this._materialSpecularData){for(s=0;s<this._materialSpecularData.length;++s){i=this._materialSpecularData[s];if(i.materialID==e.materialID){r.specularMethod=null;r.specularMethod=i.basicSpecularMethod;r.color=i.color;r.alpha=i.alpha;break}}}}else{r=a.material;r.mode=y.MULTI_PASS;r.texture=e.texture;r.color=e.color;r.repeat=true;if(e.specularMethod){r.specularMethod=null;r.specularMethod=e.specularMethod}else if(this._materialSpecularData){for(s=0;s<this._materialSpecularData.length;++s){i=this._materialSpecularData[s];if(i.materialID==e.materialID){r.specularMethod=null;r.specularMethod=i.basicSpecularMethod;r.color=i.color;break}}}}}a.material.name=t[1]?t[1]:t[0];this._meshes.splice(n,1);--n}}if(e.cm||r)this._pFinalizeAsset(e.cm||r)};t.prototype.applyMaterials=function(){if(this._materialLoaded.length==0)return;for(var e=0;e<this._materialLoaded.length;++e)this.applyMaterial(this._materialLoaded[e])};return t}(h);var b=function(){function e(){this.groups=new Array}return e}();var v=function(){function e(){this.materialGroups=new Array}return e}();var g=function(){function e(){this.faces=new Array}return e}();var w=function(){function e(){this.color=16777215;this.alpha=1}return e}();var k=function(){function e(){this.color=16777215;this.alpha=1}return e}();var B=function(){function e(){this.vertexIndices=new Array;this.uvIndices=new Array;this.normalIndices=new Array;this.indexIds=new Array}return e}();var M=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this._u=e;this._v=t}Object.defineProperty(e.prototype,"v",{get:function(){return this._v},set:function(e){this._v=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"u",{get:function(){return this._u},set:function(e){this._u=e},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this._u,this._v)};e.prototype.toString=function(){return this._u+","+this._v};return e}();var N=function(){function e(e,t,a,r){if(e===void 0){e=0}if(t===void 0){t=0}if(a===void 0){a=0}if(r===void 0){r=0}this._x=e;this._y=t;this._z=a;this._index=r}Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(e){this._z=e},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this._x,this._y,this._z)};return e}();t.exports=m},{"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/data/TriangleSubGeometry":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserBase":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-core/lib/textures/TextureBase":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/managers/DefaultMaterialManager":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/MethodMaterialMode":undefined,"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":undefined}],"awayjs-parsers/lib/Parsers":[function(e,t,a){var r=e("awayjs-core/lib/library/AssetLoader");var s=e("awayjs-parsers/lib/AWDParser");var i=e("awayjs-parsers/lib/Max3DSParser");var n=e("awayjs-parsers/lib/MD2Parser");var o=e("awayjs-parsers/lib/OBJParser");var h=function(){function e(){}e.enableAllBundled=function(){r.enableParsers(e.ALL_BUNDLED)};e.ALL_BUNDLED=Array(s,i,n,o);return e}();t.exports=h},{"awayjs-core/lib/library/AssetLoader":undefined,"awayjs-parsers/lib/AWDParser":"awayjs-parsers/lib/AWDParser","awayjs-parsers/lib/MD2Parser":"awayjs-parsers/lib/MD2Parser","awayjs-parsers/lib/Max3DSParser":"awayjs-parsers/lib/Max3DSParser","awayjs-parsers/lib/OBJParser":"awayjs-parsers/lib/OBJParser"}]},{},[]);

//# sourceMappingURL=awayjs-parsers.min.js.map